# Change Log


## 1.18

**Release date:** 2024-2-27

![AppVersion: 5.2.3](https://img.shields.io/static/v1?label=AppVersion&message=5.2.3&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add Openshift analytics (#763)
* Update appVersions for DC apps (#765)
* OpenShift Support (#752)
* Use testPods values for test images and container resources (#761)
* Relabel instance name on jmx service monitor (#757)
* Added pvc retention policy to Bitbucket Mesh StatefulSet (#755)

## 1.21.1

**Release date:** 2024-8-22

![AppVersion: 6.0.1](https://img.shields.io/static/v1?label=AppVersion&message=6.0.1&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update appVersions for DC apps (#865)
* Make crowd context configurable (#864)

## 1.21.0

**Release date:** 2024-8-13

![AppVersion: 6.0.0](https://img.shields.io/static/v1?label=AppVersion&message=6.0.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Added annotations to the StatefulSets (#857)
* Update appVersions for DC apps (#858)
* Make shared home pvc access mode configurable (#855)
* Allow referencing multiple secrets in additionalCertificates (#852)
* Make it possible to define resources for import-certs init container (#851)
* Move update strategy to root level (#849)
* Add helm value for custom jmx jar location when using other jmx init container images (#846)
* feat: add appProtocol for service meshes (#847)
* Make StatefulSet updateStrategy configurable (#845)

## 1.20.1

**Release date:** 2024-7-7

![AppVersion: 6.0.0](https://img.shields.io/static/v1?label=AppVersion&message=6.0.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update appVersions for DC apps (#825)
* Make it possible to override proxy settings (#822)

## 1.20.0

**Release date:** 2024-5-13

![AppVersion: 5.3.0](https://img.shields.io/static/v1?label=AppVersion&message=5.3.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Set atlassian.logging.cloud.enabled system property to false if a custom FluentD config is used (#796)

## 1.19.0

**Release date:** 2024-4-22

![AppVersion: 5.3.0](https://img.shields.io/static/v1?label=AppVersion&message=5.3.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Make cacerts writable for user and group (#790)

## 1.18.1

**Release date:** 2024-3-26

![AppVersion: 5.2.3](https://img.shields.io/static/v1?label=AppVersion&message=5.2.3&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update appVersions for DC apps (#769)

## 1.17.2

**Release date:** 2023-12-18

![AppVersion: 5.2.2](https://img.shields.io/static/v1?label=AppVersion&message=5.2.2&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* StatefulSet PVC auto deletion (#736)
* Update appVersions for DC apps (#738)
* Add optional postStart hook (#735)

## 1.17.1

**Release date:** 2023-12-11

![AppVersion: 5.2.1](https://img.shields.io/static/v1?label=AppVersion&message=5.2.1&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Make liveness probe configurable (#732)

## 1.17.0

**Release date:** 2023-12-7

![AppVersion: 5.2.1](https://img.shields.io/static/v1?label=AppVersion&message=5.2.1&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Make test pod metadata and spec configurable (#727)
* Optional analytics/support ConfigMap (#721)
* Fix ingress annotations comment (#720)

## 1.16.6

**Release date:** 2023-10-30

![AppVersion: 5.2.0](https://img.shields.io/static/v1?label=AppVersion&message=5.2.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* JMX container resources (#707)

## 1.16.5

**Release date:** 2023-10-24

![AppVersion: 5.2.0](https://img.shields.io/static/v1?label=AppVersion&message=5.2.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Fix custom jmx config (#699)
* Copy cacerts first, then import certs (#696)

## 1.16.4

**Release date:** 2023-10-11

![AppVersion: 5.2.0](https://img.shields.io/static/v1?label=AppVersion&message=5.2.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update Helm chart version

## 1.16.3

**Release date:** 2023-10-11

![AppVersion: 5.2.0](https://img.shields.io/static/v1?label=AppVersion&message=5.2.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update Helm chart version

## 1.16.2

**Release date:** 2023-10-8

![AppVersion: 5.2.0](https://img.shields.io/static/v1?label=AppVersion&message=5.2.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add quote to podAnnotation templating (#678)
* Update appVersions for DC apps (#679)

## 1.16.1

**Release date:** 2023-9-20

![AppVersion: 5.1.5](https://img.shields.io/static/v1?label=AppVersion&message=5.1.5&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update Helm chart version

## 1.16.0

**Release date:** 2023-9-18

![AppVersion: 5.1.5](https://img.shields.io/static/v1?label=AppVersion&message=5.1.5&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Allow templating of pod annotations (#662)
* Make securityContext configurable for jmx exporter init container (#670)
* Add user provided certificates to the default Java truststore (#663)

## 1.15.3

**Release date:** 2023-8-28

![AppVersion: 5.1.4](https://img.shields.io/static/v1?label=AppVersion&message=5.1.4&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Decouple server and jmx annotations (#654)
* Disable startup probes by default (#653)

## 1.15.2

**Release date:** 2023-8-22

![AppVersion: 5.1.4](https://img.shields.io/static/v1?label=AppVersion&message=5.1.4&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add defaultMode to additionalConfigMaps (#647)

## 1.15.1

**Release date:** 2023-8-17

![AppVersion: 5.1.4](https://img.shields.io/static/v1?label=AppVersion&message=5.1.4&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Make startup probes optional (#646)

## 1.15.0

**Release date:** 2023-8-7

![AppVersion: 5.1.4](https://img.shields.io/static/v1?label=AppVersion&message=5.1.4&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add PodDisruptionBudget to Atlassian DC Helm Charts (#636)
* Add annotations to Grafana dashboards ConfigMaps (#637)
* Add additional ConfigMaps to Helm Charts (#635)
* Update appVersions for DC apps (#638)

## 1.14.1

**Release date:** 2023-7-26

![AppVersion: 5.1.3](https://img.shields.io/static/v1?label=AppVersion&message=5.1.3&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Disable liveness probes by default, make timeoutSeconds configurable (#630)

## 1.14.0

**Release date:** 2023-7-25

![AppVersion: 5.1.3](https://img.shields.io/static/v1?label=AppVersion&message=5.1.3&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add liveness probes, make readinessProbes configurable (#626)
* make sharedHome.permissionFix.command helper to be per-product (#622)

## 1.13.1

**Release date:** 2023-6-28

![AppVersion: 5.1.3](https://img.shields.io/static/v1?label=AppVersion&message=5.1.3&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Run jmx init container as root: get fix from common chart ver 1.2.3 (#608)

## 1.13.0

**Release date:** 2023-6-13

![AppVersion: 5.1.3](https://img.shields.io/static/v1?label=AppVersion&message=5.1.3&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update appVersions for DC apps (#599)
* Update Grafana dashboards for DC apps (#596)
* Update Grafana dashboards for DC apps (#595)
* Crowd dashboard (#593)
* Bamboo dashboard (#588)
* Make sessionAffinity configurable in service spec (#582)
* Add optional ServiceMonitors to DC Helm Charts (#573)
* Expose JMX beans on http endpoint (#562)

## 1.12.0

**Release date:** 2023-4-18

![AppVersion: 5.1.2](https://img.shields.io/static/v1?label=AppVersion&message=5.1.2&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add priorityClassName to pod spec (#557)
* Add hostAliases for all DC products (#556)
* Crowd service type edge case documentation (#554)
* Add a warning to Crowd's values.yaml ingress.path field (#550)
* Update fluentd cm template for crowd (#547)
* Documentation for Crowd (#544)

## 1.11.0

**Release date:** 2023-3-22

![AppVersion: 5.1.2](https://img.shields.io/static/v1?label=AppVersion&message=5.1.2&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Fix typo in helpers. Add warnings about Crowd in docs (#534)
* Update appVersions for DC apps (#533)
* Update crowd helm chart (#532)

## 1.10.0

**Release date:** 2023-2-20

![AppVersion: 5.1.2](https://img.shields.io/static/v1?label=AppVersion&message=5.1.2&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add Bitbucket Mesh to Bitbucket Helm chart (#501)

## 1.9.1

**Release date:** 2023-2-16

![AppVersion: 5.1.2](https://img.shields.io/static/v1?label=AppVersion&message=5.1.2&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Fix artifact hub annotation yaml

## 1.9.0

**Release date:** 2023-2-15

![AppVersion: 5.1.2](https://img.shields.io/static/v1?label=AppVersion&message=5.1.2&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update appVersion to the latest LTS (#515)

## 1.8.1

**Release date:** 2022-12-12

![AppVersion: 5.1.0](https://img.shields.io/static/v1?label=AppVersion&message=5.1.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Fix artifacthub.io annotations

## 1.8.0

**Release date:** 2022-12-9

![AppVersion: 5.1.0](https://img.shields.io/static/v1?label=AppVersion&message=5.1.0&color=success&logo=)
![Kubernetes: >=1.21.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.21.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* CLIP-1644: Stop supporting 1.19-1.20 k8s (#486)
* Update appVersion to 5.1.0
* Use `ingress.https` flag to enable tls in ingress (#487)

## 1.7.1

**Release date:** 2022-10-26

![AppVersion: 5.0.2](https://img.shields.io/static/v1?label=AppVersion&message=9.0.0&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Patch release to fix Artifacthub metadata

## 1.7.0

**Release date:** 2022-10-25

![AppVersion: 5.0.2](https://img.shields.io/static/v1?label=AppVersion&message=5.0.2&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Pin Python version to 3.9.14 (#468)
* Update Bitbucket ingress testing values (#466)
* Ingress Class Name is moved under spec field. (#451)
* Make ATL_FORCE_CFG_UPDATE configurable in values.yaml (#454)
* Add osquery related env vars for Terraform (#462)
* AWS cleanup and log colletion from k8s (#461)

## 1.6.0

**Release date:** 2022-10-12

![AppVersion: 5.0.2](https://img.shields.io/static/v1?label=AppVersion&message=5.0.2&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Update Crowd version to 5.0.2 (#455)
* Improved documentation (#448, #440)


## 1.5.0

**Release date:** 2022-07-14

![AppVersion: 5.0.1](https://img.shields.io/static/v1?label=AppVersion&message=5.0.1&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Fix: Use the custom ports for Crowd service (#419)
* Update Crowd version to 5.0.1 (#430)

## 1.4.0

**Release date:** 2022-05-25

![AppVersion: 5.0.0](https://img.shields.io/static/v1?label=AppVersion&message=5.0.0&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Make pod securityContext optional (#389)
* Support for configuring ingress proxy settings via values.yaml (#402)
* Fixed common.label error (#403)
* Add ATL_PROXY_NAME and ATL_PROXY_PORT to Crowd (#407)
* Update Crowd version to 5.0.0 (#412)

## 1.3.0

**Release date:** 2022-03-24

![AppVersion: 4.4.1](https://img.shields.io/static/v1?label=AppVersion&message=4.4.1&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* Update Crowd version to 4.4.1 (#396)


## 1.2.0

**Release date:** 2022-02-14

![AppVersion: 4.4.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.4.0-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


Crowd (1.1.0 -> 1.2.0)
* Added missing JVM_SUPPORT_RECOMMENDED_ARGS env (#376)
* Improvements on [documentation](https://github.com/atlassian/data-center-helm-charts/) (#370, #357)
* Updated Atlassian charts to use common definitions (#303)
* Added service account annotation (#363)
* Added new feature additionalVolumeClaimTemplates and provided example in documentation (#334, #368)
* Added new feature podLabels (#364)
* Added new feature to define loadBalancerIP (#365)
* Define podAnnotations as template to allow overrides (#341)
* DCKUBE-738: Added topologySpreadConstraints to products (#351)
* Set ActiveProcessorCount automatically based on Values.<product>.resources.container.requests.cpu (#352)
* Added new feature additionalPorts (for jmx-monitoring) (#353)


## 1.1.0

**Release date:** 2021-11-03

![AppVersion: 4.4.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.4.0-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* DCKUBE-721: Update version in Chart.yaml files
* DCKUBE-733: Update the product versions (#345)
* DCKUBE-739: Fix typos (#337)
* DCKUBE-739: Make securityContext changes backward compatible (#332)
* Roll Statefulset Pods if ConfigMap changes (#315)
* DCKUBE-677: Make security context more flexible (#321)
* DCKUBE-722: Enable configuring ingress.class name (#313)
* DCKUBE-678: Add schedulerName to StatefulSet (#301)


## 1.0.0

This is the first officially supported version of the Helm chart.

![AppVersion: 4.3.5-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.5-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* DCKUBE-621: Improvements to graceful shutdown (#282)
* Improved [documentation](https://github.com/atlassian/data-center-helm-charts/) (#275, #276, #277, #279, #280, #284, #285, #289, #290, #291, #293. #295)


## 0.16.0

![AppVersion: 4.3.5-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.5-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* DCKUBE-598: Enable NFS permission fixer by default (#241)
* DCKUBE-581: Enable configuration for SET_PERMISSIONS docker image variable (#261)
* DCKUBE-613: Configurable grace periods (#249)
* Improve [documentation](https://github.com/atlassian/data-center-helm-charts/) (#236, #243, #245, #252, #253, #256, #258, #260, #268, #270, #272)


## 0.15.0

![AppVersion: 4.3.5-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.5-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)

* Add Service annotations (#209)
* DCKUBE-453: Add support for providing a custom fluentd start command (#218)
* DCKUBE-435: Renamed the 'master' branch to 'main' and set it as default (#232)
* Update EKS cluster yaml example (#227)
* Improve [documentation](https://github.com/atlassian/data-center-helm-charts/) (#206, #222, #223, #228, #229, #231, #233, #235)


## 0.14.0

![AppVersion: 4.3.5-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.5-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* DCKUBE-529: Update Crowd version to 4.3.5-jdk11 (#212)


## 0.13.0

![AppVersion: 4.3.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.0-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* DCKUBE-54: Volume docs updates (#188)


## 0.12.0

![AppVersion: 4.3.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.0-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* DCKUBE-437: Wording improvement for warning in NOTES when PV is not used (#199)
* DCKUBE-393: Improve readability of Crowd values.yaml file (#184)
* Defining the following values in the helpers template for each chart, to allow template overrides: (#173)

### Default value changes

There has been major improvement in the documentation for the keys in `values.yaml` file but there isn't any functional
change.

## 0.11.0

**Release date:** 2021-06-09

![AppVersion: 4.3.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.0-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* DCKUBE-348: Warning of absent persistent volume (#169)
* DCKUBE-307: Do not print logs when testing helm installation. (#168)
* DCKUBE-308: Print service URL after installing helm chart (#157)
* DCKUBE-282: Update icons to SVG (#164)

### Default value changes

```diff
# No changes in this release
```

## 0.10.0

**Release date:** 2021-06-01

![AppVersion: 4.3.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.0-jdk11&color=success&logo=)
![Kubernetes: >=1.19.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.19.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* Version 0.10.0
* DCKUBE-332: Update the minimal supported kubernetes version v1.19 (#154)

### Default value changes

```diff
# No changes in this release
```

## 0.9.0

**Release date:** 2021-05-25

![AppVersion: 4.3.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.0-jdk11&color=success&logo=)
![Kubernetes: >=1.17.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.17.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* Version 0.9.0
* initial commit - changed the max-body-size of request to 250MB for all products and documented in CONFIG.md (#140)
* Merge branch 'master' into dckube-267-define-minimum-compute-resources
* README update for 0.8.0
* Merge branch 'dckube-267-define-minimum-compute-resources' of github.com:https://github.com/atlassian/data-center-helm-charts/data-center-helm-charts into dckube-267-define-minimum-compute-resources
* DCKUBE-267: Update cpu request sizes
* Merge branch 'master' into dckube-267-define-minimum-compute-resources
* DCKUBE-267: Update cpu request sizes
* Added ingress.host into values.yaml with corresponding value injection in ingress.yaml for all apps. Defaults to / (#134)
* DCKUBE-267: Wording updates
* DCKUBE-267: Initial commit
* Crowd 0.7.0 README update

### Default value changes

```diff
diff --git a/src/main/charts/crowd/values.yaml b/src/main/charts/crowd/values.yaml
index a48f866..ce5a29d 100644
--- a/src/main/charts/crowd/values.yaml
+++ b/src/main/charts/crowd/values.yaml
@@ -76,28 +76,30 @@ crowd:

   resources:
     jvm:
+      # -- JVM memory arguments below are based on the defaults defined for the Crowd docker container, see:
+      # https://bitbucket.org/atlassian-docker/docker-atlassian-crowd/src/master/
+      #
       # -- The maximum amount of heap memory that will be used by the Crowd JVM
-      maxHeap: "1g"
+      maxHeap: "768m"
       # -- The minimum amount of heap memory that will be used by the Crowd JVM
-      minHeap: "1g"
-      # -- The memory reserved for the Crowd JVM code cache
-      reservedCodeCache: "512m"
+      minHeap: "384m"
     # -- Specifies the standard Kubernetes resource requests and/or limits for the Crowd container.
     # It is important that if the memory resources are specified here, they must allow for the size of the Crowd JVM.
     # That means the maximum heap size, the reserved code cache size, plus other JVM overheads, must be accommodated.
-    # Allowing for (maxHeap+codeCache)*1.5 would be an example.
-    container: {}
+    # Allowing for maxHeap * 1.5 would be an example.
+    container:
     #  limits:
-    #    cpu: "4"
-    #    memory: "2G"
-    #  requests:
-    #    cpu: "4"
-    #    memory: "2G"
+    #    cpu: "1"
+    #    memory: "1G"
+      requests:
+        cpu: "2" # -- If changing the cpu value update additional JVM arg 'ActiveProcessorCount' below
+        memory: "1G"

   # -- Specifies a list of additional arguments that can be passed to the Crowd JVM, e.g. system properties
-  additionalJvmArgs: []
-#    - -Dfoo=bar
-#    - -Dfruit=lemon
+  additionalJvmArgs:
+    # -- The value defined for ActiveProcessorCount should correspond to that provided for 'container.requests.cpu'
+    # see: https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE
+    - -XX:ActiveProcessorCount=2

   # -- Specifies a list of additional Java libraries that should be added to the Crowd container.
   # Each item in the list should specify the name of the volume which contain the library, as well as the name of the
@@ -136,9 +138,11 @@ ingress:
   # -- The max body size to allow. Requests exceeding this size will result
   # in an 413 error being returned to the client.
   # https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/#custom-max-body-size
-  maxBodySize: 10m
+  maxBodySize: 250m
   # -- The fully-qualified hostname of the Ingress Resource.
   host:
+  # -- The base path for the ingress rule.
+  path: "/"
   # -- The custom annotations that should be applied to the Ingress
   # Resource when not using the Kubernetes ingress-nginx controller.
   annotations: {}
```

## 0.7.0

**Release date:** 2021-05-13

![AppVersion: 4.3.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.0-jdk11&color=success&logo=)
![Kubernetes: >=1.17.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.17.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* Add Crowd as a tested product (#128)

### Default value changes

```diff
# No changes in this release
```

## 0.1.0

**Release date:** 2021-05-13

![AppVersion: 4.3.0-jdk11](https://img.shields.io/static/v1?label=AppVersion&message=4.3.0-jdk11&color=success&logo=)
![Kubernetes: >=1.17.x-0](https://img.shields.io/static/v1?label=Kubernetes&message=>=1.17.x-0&color=informational&logo=kubernetes)
![Helm: v3](https://img.shields.io/static/v1?label=Helm&message=v3&color=informational&logo=helm)


* initial Crowd Helm Chart based on Confluence Helm Chart (#106)

### Default value changes

```diff
# -- The initial number of pods that should be started at deployment of each of Crowd.
# Note that because Crowd requires initial manual configuration after the first pod is deployed, and before scaling
# up to additional pods, this should always be kept as 1.
replicaCount: 1

image:
  repository: atlassian/crowd
  pullPolicy: IfNotPresent
  # -- The docker image tag to be used. Defaults to the Chart appVersion.
  tag: 4.2.2

serviceAccount:
  # -- Specifies the name of the ServiceAccount to be used by the pods.
  # If not specified, but the the "serviceAccount.create" flag is set, then the ServiceAccount name will be auto-generated,
  # otherwise the 'default' ServiceAccount will be used.
  name:
  # -- true if a ServiceAccount should be created, or false if it already exists
  create: true
  # -- The list of image pull secrets that should be added to the created ServiceAccount
  imagePullSecrets: []
  clusterRole:
    # -- Specifies the name of the ClusterRole that will be created if the "serviceAccount.clusterRole.create" flag is set.
    # If not specified, a name will be auto-generated.
    name:
    # -- true if a ClusterRole should be created, or false if it already exists
    create: true
  clusterRoleBinding:
    # -- Specifies the name of the ClusterRoleBinding that will be created if the "serviceAccount.clusterRoleBinding.create" flag is set
    # If not specified, a name will be auto-generated.
    name:
    # -- true if a ClusterRoleBinding should be created, or false if it already exists
    create: true

crowd:
  service:
    # -- The port on which the Crowd Kubernetes service will listen
    port: 80
    # -- The type of Kubernetes service to use for Crowd
    type: ClusterIP
  # -- Enable or disable security context in StatefulSet template spec. Enabled by default with UID 2002.
  # -- Disable when deploying to OpenShift, unless anyuid policy is attached to a service account
  securityContext:
    enabled: true
    # -- The GID used by the Crowd docker image
    gid: "2004"
  # -- The umask used by the Crowd process when it creates new files.
  # Default is 0022, which makes the new files read/writeable by the Crowd user, and readable by everyone else.
  umask: "0022"
  ports:
    # -- The port on which the Crowd container listens for HTTP traffic
    http: 8095
    # -- The port on which the Crowd container listens for Hazelcast traffic
    hazelcast: 5701
  readinessProbe:
    # -- The initial delay (in seconds) for the Crowd container readiness probe, after which the probe will start running
    initialDelaySeconds: 10
    # -- How often (in seconds) the Crowd container readiness robe will run
    periodSeconds: 5
    # -- The number of consecutive failures of the Crowd container readiness probe before the pod fails readiness checks
    failureThreshold: 30

  accessLog:
    # -- True if access logging should be enabled.
    enabled: true
    # -- The path within the Crowd container where the local-home volume should be mounted in order to capture access logs.
    mountPath: "/opt/atlassian/crowd/logs"
    # -- The subdirectory within the local-home volume where access logs should be stored.
    localHomeSubPath: "logs"

  clustering:
    # -- Set to true if Data Center clustering should be enabled
    # This will automatically configure cluster peer discovery between cluster nodes.
    enabled: false
    # -- Set to true if the Kubernetes pod name should be used as the end-user-visible name of the Data Center cluster node.
    usePodNameAsClusterNodeName: true

  resources:
    jvm:
      # -- The maximum amount of heap memory that will be used by the Crowd JVM
      maxHeap: "1g"
      # -- The minimum amount of heap memory that will be used by the Crowd JVM
      minHeap: "1g"
      # -- The memory reserved for the Crowd JVM code cache
      reservedCodeCache: "512m"
    # -- Specifies the standard Kubernetes resource requests and/or limits for the Crowd container.
    # It is important that if the memory resources are specified here, they must allow for the size of the Crowd JVM.
    # That means the maximum heap size, the reserved code cache size, plus other JVM overheads, must be accommodated.
    # Allowing for (maxHeap+codeCache)*1.5 would be an example.
    container: {}
    #  limits:
    #    cpu: "4"
    #    memory: "2G"
    #  requests:
    #    cpu: "4"
    #    memory: "2G"

  # -- Specifies a list of additional arguments that can be passed to the Crowd JVM, e.g. system properties
  additionalJvmArgs: []
#    - -Dfoo=bar
#    - -Dfruit=lemon

  # -- Specifies a list of additional Java libraries that should be added to the Crowd container.
  # Each item in the list should specify the name of the volume which contain the library, as well as the name of the
  # library file within that volume's root directory. Optionally, a subDirectory field can be included to specify which
  # directory in the volume contains the library file.
  additionalLibraries: []
#    - volumeName:
#      subDirectory:
#      fileName:

  # -- Specifies a list of additional Crowd plugins that should be added to the Crowd container.
  # These are specified in the same manner as the additionalLibraries field, but the files will be loaded
  # as bundled plugins rather than as libraries.
  additionalBundledPlugins: []
#    - volumeName:
#      subDirectory:
#      fileName:

  # -- Defines any additional volumes mounts for the Crowd container.
  # These can refer to existing volumes, or new volumes can be defined in volumes.additional.
  additionalVolumeMounts: []

  # -- Defines any additional environment variables to be passed to the Crowd container.
  # See https://hub.docker.com/r/atlassian/crowd for supported variables.
  additionalEnvironmentVariables: []

ingress:
  # -- True if an Ingress Resource should be created.
  create: false
  # -- True if the created Ingress Resource is to use the Kubernetes ingress-nginx controller:
  # https://kubernetes.github.io/ingress-nginx/
  # This will populate the Ingress Resource with annotations for the Kubernetes ingress-nginx controller.
  # Set to false if a different controller is to be used, in which case the appropriate annotations for that
  # controller need to be specified.
  nginx: true
  # -- The max body size to allow. Requests exceeding this size will result
  # in an 413 error being returned to the client.
  # https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/#custom-max-body-size
  maxBodySize: 10m
  # -- The fully-qualified hostname of the Ingress Resource.
  host:
  # -- The custom annotations that should be applied to the Ingress
  # Resource when not using the Kubernetes ingress-nginx controller.
  annotations: {}
  # -- True if the browser communicates with the application over HTTPS.
  https: true
  # -- Secret that contains a TLS private key and certificate.
  # Optional if Ingress Controller is configured to use one secret for all ingresses
  tlsSecretName:

fluentd:
  # -- True if the fluentd sidecar should be added to each pod
  enabled: false
  # -- The name of the image containing the fluentd sidecar
  imageName: fluent/fluentd-kubernetes-daemonset:v1.11.5-debian-elasticsearch7-1.2
  # -- The port on which the fluentd sidecar will listen
  httpPort: 9880
  elasticsearch:
    # -- True if fluentd should send all log events to an elasticsearch service.
    enabled: true
    # -- The hostname of the Elasticsearch service that fluentd should send logs to.
    hostname: elasticsearch
    # -- The prefix of the elasticsearch index name that will be used
    indexNamePrefix: crowd

# -- Specify additional annotations to be added to all Crowd pods
podAnnotations: {}
#  "name": "value"

volumes:
  localHome:
    persistentVolumeClaim:
      # -- If true, then a PersistentVolumeClaim will be created for each local-home volume.
      create: false
      # -- Specifies the name of the storage class that should be used for the local-home volume claim.
      storageClassName:
      # -- Specifies the standard Kubernetes resource requests and/or limits for the local-home volume claims.
      resources:
        requests:
          storage: 1Gi
    # -- When persistentVolumeClaim.create is false, then this value can be used to define a standard Kubernetes
    # volume which will be used for the local-home volumes. If not defined, then defaults to an emptyDir volume.
    customVolume: {}
    # -- The path within the Crowd container which the local-home volume should be mounted.
    mountPath: "/var/atlassian/application-data/crowd"
  sharedHome:
    persistentVolumeClaim:
      # -- If true, then a PersistentVolumeClaim will be created for the shared-home volume.
      create: false
      # -- Specifies the name of the storage class that should be used for the shared-home volume claim.
      storageClassName:
      # -- Specifies the standard Kubernetes resource requests and/or limits for the shared-home volume claims.
      resources:
        requests:
          storage: 1Gi
    # -- When persistentVolumeClaim.create is false, then this value can be used to define a standard Kubernetes
    # volume which will be used for the shared-home volume. If not defined, then defaults to an emptyDir (i.e. unshared) volume.
    customVolume: {}
    # -- Specifies the path in the Crowd container to which the shared-home volume will be mounted.
    mountPath: "/var/atlassian/application-data/crowd/shared"
    # -- Specifies the sub-directory of the shared-home volume which will be mounted in to the Crowd container.
    subPath:
    nfsPermissionFixer:
      # -- If enabled, this will alter the shared volume's root directory so that Crowd can write to it.
      # This is a workaround for a Kubernetes bug affecting NFS volumes: https://github.com/kubernetes/examples/issues/260
      enabled: false
      # -- The path in the initContainer where the shared-home volume will be mounted
      mountPath: /shared-home
      # -- By default, the fixer will change the group ownership of the volume's root directory to match the Crowd
      # container's GID (2002), and then ensures the directory is group-writeable. If this is not the desired behaviour,
      # command used can be specified here.
      command:
  # -- Defines additional volumes that should be applied to all Crowd pods.
  # Note that this will not create any corresponding volume mounts;
  # those needs to be defined in crowd.additionalVolumeMounts
  additional: []

# -- Standard Kubernetes node-selectors that will be applied to all Crowd pods
nodeSelector: {}

# -- Standard Kubernetes tolerations that will be applied to all Crowd pods
tolerations: []

# -- Standard Kubernetes affinities that will be applied to all Crowd pods
affinity: {}

# -- Additional container definitions that will be added to all Crowd pods
additionalContainers: []

# -- Additional initContainer definitions that will be added to all Crowd pods
additionalInitContainers: []

# -- Additional labels that should be applied to all resources
additionalLabels: {}

# -- Additional existing ConfigMaps and Secrets not managed by Helm that should be mounted into server container
# configMap and secret are two available types (camelCase is important!)
# mountPath is a destination directory in a container and key is file name
# name references existing ConfigMap or secret name. VolumeMount and Volumes are added with this name + index position,
# for example custom-config-0, keystore-2
additionalFiles: []
#  - name: custom-config
#    type: configMap
#    key: log4j.properties
#    mountPath:  /var/atlassian
#  - name: custom-config
#    type: configMap
#    key: web.xml
#    mountPath: /var/atlassian
#  - name: keystore
#    type: secret
#    key: keystore.jks
#    mountPath: /var/ssl
```

---
Autogenerated from Helm Chart and git history using [helm-changelog](https://github.com/mogensen/helm-changelog)
