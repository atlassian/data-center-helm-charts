{{- if .Values.monitoring.exposeJmxMetrics }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "common.names.fullname" . }}-jmx-config
  labels:
    {{- include "common.labels.commonLabels" . | nindent 4 }}
data:
{{ if .Values.monitoring.jmxExporterCustomConfig }}
{{- range $key, $value := .Values.monitoring.jmxExporterCustomConfig }}
  {{ $key }}: |
{{ $value | indent 4 }}
  {{- end }}
  {{ else }}
  jmx-config.yaml: |
    lowercaseOutputLabelNames: true
    lowercaseOutputName: true
    rules:
      - pattern: ".*"
{{- end }}
{{- end }}
