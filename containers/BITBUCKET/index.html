<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../CONFLUENCE/ rel=prev><link href=../BITBUCKET-MESH/ rel=next><link rel=icon href=../../assets/logos/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.23"><title>Bitbucket - Atlassian DC Helm Charts</title><link rel=stylesheet href=../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-FZ7HCVNVPY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-FZ7HCVNVPY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-FZ7HCVNVPY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#bitbucket class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <a href=https://community.atlassian.com/t5/Atlassian-Data-Center-on/gh-p/DC_Kubernetes title="Share your feedback with the Atlassian Data Center on Kubernetes Community" style=color:white><strong>Share your feedback and join the discussion</strong></a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Atlassian DC Helm Charts" class="md-header__button md-logo" aria-label="Atlassian DC Helm Charts" data-md-component=logo> <img src=../../assets/logos/atlassian-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Atlassian DC Helm Charts </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Bitbucket </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/atlassian/data-center-helm-charts title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> atlassian/data-center-helm-charts </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../userguide/PREREQUISITES/ class=md-tabs__link> User guide </a> </li> <li class=md-tabs__item> <a href=../../examples/EXAMPLES/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../troubleshooting/TROUBLESHOOTING/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../platforms/PLATFORMS/ class=md-tabs__link> Platforms </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../JIRA/ class=md-tabs__link> Containers </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Atlassian DC Helm Charts" class="md-nav__button md-logo" aria-label="Atlassian DC Helm Charts" data-md-component=logo> <img src=../../assets/logos/atlassian-logo.svg alt=logo> </a> Atlassian DC Helm Charts </label> <div class=md-nav__source> <a href=https://github.com/atlassian/data-center-helm-charts title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> atlassian/data-center-helm-charts </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> User guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/PREREQUISITES/ class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/VERIFICATION/ class=md-nav__link> <span class=md-ellipsis> Verification </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/INSTALLATION/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/CONFIGURATION/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/MIGRATION/ class=md-nav__link> <span class=md-ellipsis> Migration </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/OPERATION/ class=md-nav__link> <span class=md-ellipsis> Operation </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class=md-ellipsis> Monitoring </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/monitoring/PROMETHEUS/ class=md-nav__link> <span class=md-ellipsis> Prometheus and Grafana </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/monitoring/PRE_CANNED_CHARTS/ class=md-nav__link> <span class=md-ellipsis> Product specific dashboards </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex=0> <span class=md-ellipsis> Upgrades </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Upgrades </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/upgrades/HELM_CHART_UPGRADE/ class=md-nav__link> <span class=md-ellipsis> Helm chart upgrade </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/upgrades/PRODUCTS_UPGRADE/ class=md-nav__link> <span class=md-ellipsis> Products upgrade </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_9> <label class=md-nav__link for=__nav_2_9 id=__nav_2_9_label tabindex=0> <span class=md-ellipsis> Resource management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_9_label aria-expanded=false> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> Resource management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/resource_management/JIRA_INDEX_SNAPSHOT/ class=md-nav__link> <span class=md-ellipsis> Creating an initial index snapshot in Jira </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/resource_management/REQUESTS_AND_LIMITS/ class=md-nav__link> <span class=md-ellipsis> Resource requests and limits </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/resource_management/RESOURCE_SCALING/ class=md-nav__link> <span class=md-ellipsis> Product scaling </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/EXAMPLES/ class=md-nav__link> <span class=md-ellipsis> Available examples </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Kubernetes cluster </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Kubernetes cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/cluster/AKS_SETUP/ class=md-nav__link> <span class=md-ellipsis> Preparing an AKS cluster </span> </a> </li> <li class=md-nav__item> <a href=../../examples/cluster/CLOUD_PROVIDERS/ class=md-nav__link> <span class=md-ellipsis> Provisioning Kubernetes clusters on cloud-based providers </span> </a> </li> <li class=md-nav__item> <a href=../../examples/cluster/EKS_SETUP/ class=md-nav__link> <span class=md-ellipsis> Preparing an EKS cluster </span> </a> </li> <li class=md-nav__item> <a href=../../examples/cluster/GKE_SETUP/ class=md-nav__link> <span class=md-ellipsis> Preparing an GKE cluster </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Database </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/database/AMAZON_RDS/ class=md-nav__link> <span class=md-ellipsis> Creating an RDS database instance </span> </a> </li> <li class=md-nav__item> <a href=../../examples/database/CLOUD_PROVIDERS/ class=md-nav__link> <span class=md-ellipsis> Provisioning databases on cloud-based providers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Ingress </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Ingress </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/ingress/CONTROLLERS/ class=md-nav__link> <span class=md-ellipsis> Provisioning an Ingress controller </span> </a> </li> <li class=md-nav__item> <a href=../../examples/ingress/DNS/ class=md-nav__link> <span class=md-ellipsis> Create DNS record via AWS CLI </span> </a> </li> <li class=md-nav__item> <a href=../../examples/ingress/INGRESS_NGINX/ class=md-nav__link> <span class=md-ellipsis> NGINX Ingress Controller - with TLS termination </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/STORAGE/ class=md-nav__link> <span class=md-ellipsis> Shared storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_2> <label class=md-nav__link for=__nav_3_5_2 id=__nav_3_5_2_label tabindex=0> <span class=md-ellipsis> AWS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_2> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/aws/LOCAL_STORAGE/ class=md-nav__link> <span class=md-ellipsis> Local storage </span> </a> </li> <li class=md-nav__item> <a href=../../examples/storage/aws/SHARED_STORAGE/ class=md-nav__link> <span class=md-ellipsis> Shared storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_2_3> <label class=md-nav__link for=__nav_3_5_2_3 id=__nav_3_5_2_3_label tabindex=0> <span class=md-ellipsis> S3 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_5_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_2_3> <span class="md-nav__icon md-icon"></span> S3 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/aws/s3/CONFLUENCE/ class=md-nav__link> <span class=md-ellipsis> AWS S3 Attachments Storage </span> </a> </li> <li class=md-nav__item> <a href=../../examples/storage/aws/s3/JIRA/ class=md-nav__link> <span class=md-ellipsis> AWS S3 Avatars Storage </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_3> <label class=md-nav__link for=__nav_3_5_3 id=__nav_3_5_3_label tabindex=0> <span class=md-ellipsis> NFS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_3> <span class="md-nav__icon md-icon"></span> NFS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/nfs/NFS/ class=md-nav__link> <span class=md-ellipsis> NFS server for Bitbucket </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_4> <label class=md-nav__link for=__nav_3_5_4 id=__nav_3_5_4_label tabindex=0> <span class=md-ellipsis> Additional Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_4> <span class="md-nav__icon md-icon"></span> Additional Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/additional%20storage/ADDTIONAL_STORAGE/ class=md-nav__link> <span class=md-ellipsis> Additional Storage </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> Bamboo </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Bamboo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/bamboo/REMOTE_AGENTS/ class=md-nav__link> <span class=md-ellipsis> Remote agents </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bamboo/AGENT_CAPABILITIES/ class=md-nav__link> <span class=md-ellipsis> Agent capabilities </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class=md-ellipsis> Bitbucket </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Bitbucket </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_OPENSEARCH/ class=md-nav__link> <span class=md-ellipsis> OpenSearch </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_ELASTICSEARCH/ class=md-nav__link> <span class=md-ellipsis> Elasticsearch (Deprecated) </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_MIRRORS/ class=md-nav__link> <span class=md-ellipsis> Smart Mirrors </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_SSH/ class=md-nav__link> <span class=md-ellipsis> SSH </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_MESH/ class=md-nav__link> <span class=md-ellipsis> Mesh </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_AWS_OPENSEARCH/ class=md-nav__link> <span class=md-ellipsis> Configure AWS OpenSearch with Bitbucket </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_SESSION_AFFINITY/ class=md-nav__link> <span class=md-ellipsis> Configure Session Stickiness with NGINX Ingress </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class=md-ellipsis> Confluence </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Confluence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/confluence/CONFLUENCE_OPENSEARCH/ class=md-nav__link> <span class=md-ellipsis> Configuring OpenSearch for Confluence </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../examples/logging/efk/EFK/ class=md-nav__link> <span class=md-ellipsis> Logging in a Kubernetes environment </span> </a> </li> <li class=md-nav__item> <a href=../../examples/external_libraries/EXTERNAL_LIBS/ class=md-nav__link> <span class=md-ellipsis> External libraries and plugins </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../troubleshooting/TROUBLESHOOTING/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting tips </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/SUPPORT_BOUNDARIES/ class=md-nav__link> <span class=md-ellipsis> Support boundaries </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/LIMITATIONS/ class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Platforms </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Platforms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../platforms/PLATFORMS/ class=md-nav__link> <span class=md-ellipsis> Platform information </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Openshift </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Openshift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../platforms/openshift/OPENSHIFT/ class=md-nav__link> <span class=md-ellipsis> Deploy To OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../platforms/openshift/OPENSHIFT_FAQ/ class=md-nav__link> <span class=md-ellipsis> OpenShift FAQs </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Containers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Containers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../JIRA/ class=md-nav__link> <span class=md-ellipsis> Jira </span> </a> </li> <li class=md-nav__item> <a href=../CONFLUENCE/ class=md-nav__link> <span class=md-ellipsis> Confluence </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Bitbucket </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Bitbucket </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=#common-settings class=md-nav__link> <span class=md-ellipsis> Common settings </span> </a> <nav class=md-nav aria-label="Common settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verbose-container-entrypoint-logging class=md-nav__link> <span class=md-ellipsis> Verbose container entrypoint logging </span> </a> </li> <li class=md-nav__item> <a href=#reverse-proxy-settings class=md-nav__link> <span class=md-ellipsis> Reverse Proxy Settings </span> </a> </li> <li class=md-nav__item> <a href=#jvm-configuration-bitbucket-server-50-only class=md-nav__link> <span class=md-ellipsis> JVM Configuration (Bitbucket Server 5.0 + only) </span> </a> </li> <li class=md-nav__item> <a href=#application-mode-settings-bitbucket-server-50-only class=md-nav__link> <span class=md-ellipsis> Application Mode Settings (Bitbucket Server 5.0 + only) </span> </a> </li> <li class=md-nav__item> <a href=#database-configuration class=md-nav__link> <span class=md-ellipsis> Database Configuration </span> </a> <nav class=md-nav aria-label="Database Configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#jdbc-password-encryption class=md-nav__link> <span class=md-ellipsis> JDBC password encryption </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-settings class=md-nav__link> <span class=md-ellipsis> Other settings </span> </a> <nav class=md-nav aria-label="Other settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cluster-settings class=md-nav__link> <span class=md-ellipsis> Cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#jmx-monitoring class=md-nav__link> <span class=md-ellipsis> JMX Monitoring </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#container-configuration class=md-nav__link> <span class=md-ellipsis> Container Configuration </span> </a> </li> <li class=md-nav__item> <a href=#shared-directory-and-user-ids class=md-nav__link> <span class=md-ellipsis> Shared directory and user IDs </span> </a> </li> <li class=md-nav__item> <a href=#upgrade class=md-nav__link> <span class=md-ellipsis> Upgrade </span> </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> <span class=md-ellipsis> Backup </span> </a> </li> <li class=md-nav__item> <a href=#shutdown class=md-nav__link> <span class=md-ellipsis> Shutdown </span> </a> </li> <li class=md-nav__item> <a href=#versioning class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> <li class=md-nav__item> <a href=#supported-jdk-versions-and-base-images class=md-nav__link> <span class=md-ellipsis> Supported JDK versions and base images </span> </a> </li> <li class=md-nav__item> <a href=#migration-to-ubi class=md-nav__link> <span class=md-ellipsis> Migration to UBI </span> </a> </li> <li class=md-nav__item> <a href=#building-your-own-image class=md-nav__link> <span class=md-ellipsis> Building your own image </span> </a> </li> <li class=md-nav__item> <a href=#supported-architectures class=md-nav__link> <span class=md-ellipsis> Supported architectures </span> </a> </li> <li class=md-nav__item> <a href=#building-on-the-target-architecture class=md-nav__link> <span class=md-ellipsis> Building on the target architecture </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#thread-dumps class=md-nav__link> <span class=md-ellipsis> Thread dumps </span> </a> </li> <li class=md-nav__item> <a href=#heap-dump class=md-nav__link> <span class=md-ellipsis> Heap dump </span> </a> </li> <li class=md-nav__item> <a href=#manual-diagnostics class=md-nav__link> <span class=md-ellipsis> Manual diagnostics </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#support class=md-nav__link> <span class=md-ellipsis> Support </span> </a> </li> <li class=md-nav__item> <a href=#changelog class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../BITBUCKET-MESH/ class=md-nav__link> <span class=md-ellipsis> Bitbucket Mesh </span> </a> </li> <li class=md-nav__item> <a href=../BAMBOO-AGENT/ class=md-nav__link> <span class=md-ellipsis> Bamboo Agent </span> </a> </li> <li class=md-nav__item> <a href=../BAMBOO/ class=md-nav__link> <span class=md-ellipsis> Bamboo </span> </a> </li> <li class=md-nav__item> <a href=../CROWD/ class=md-nav__link> <span class=md-ellipsis> Crowd </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=#common-settings class=md-nav__link> <span class=md-ellipsis> Common settings </span> </a> <nav class=md-nav aria-label="Common settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verbose-container-entrypoint-logging class=md-nav__link> <span class=md-ellipsis> Verbose container entrypoint logging </span> </a> </li> <li class=md-nav__item> <a href=#reverse-proxy-settings class=md-nav__link> <span class=md-ellipsis> Reverse Proxy Settings </span> </a> </li> <li class=md-nav__item> <a href=#jvm-configuration-bitbucket-server-50-only class=md-nav__link> <span class=md-ellipsis> JVM Configuration (Bitbucket Server 5.0 + only) </span> </a> </li> <li class=md-nav__item> <a href=#application-mode-settings-bitbucket-server-50-only class=md-nav__link> <span class=md-ellipsis> Application Mode Settings (Bitbucket Server 5.0 + only) </span> </a> </li> <li class=md-nav__item> <a href=#database-configuration class=md-nav__link> <span class=md-ellipsis> Database Configuration </span> </a> <nav class=md-nav aria-label="Database Configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#jdbc-password-encryption class=md-nav__link> <span class=md-ellipsis> JDBC password encryption </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-settings class=md-nav__link> <span class=md-ellipsis> Other settings </span> </a> <nav class=md-nav aria-label="Other settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cluster-settings class=md-nav__link> <span class=md-ellipsis> Cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#jmx-monitoring class=md-nav__link> <span class=md-ellipsis> JMX Monitoring </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#container-configuration class=md-nav__link> <span class=md-ellipsis> Container Configuration </span> </a> </li> <li class=md-nav__item> <a href=#shared-directory-and-user-ids class=md-nav__link> <span class=md-ellipsis> Shared directory and user IDs </span> </a> </li> <li class=md-nav__item> <a href=#upgrade class=md-nav__link> <span class=md-ellipsis> Upgrade </span> </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> <span class=md-ellipsis> Backup </span> </a> </li> <li class=md-nav__item> <a href=#shutdown class=md-nav__link> <span class=md-ellipsis> Shutdown </span> </a> </li> <li class=md-nav__item> <a href=#versioning class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> <li class=md-nav__item> <a href=#supported-jdk-versions-and-base-images class=md-nav__link> <span class=md-ellipsis> Supported JDK versions and base images </span> </a> </li> <li class=md-nav__item> <a href=#migration-to-ubi class=md-nav__link> <span class=md-ellipsis> Migration to UBI </span> </a> </li> <li class=md-nav__item> <a href=#building-your-own-image class=md-nav__link> <span class=md-ellipsis> Building your own image </span> </a> </li> <li class=md-nav__item> <a href=#supported-architectures class=md-nav__link> <span class=md-ellipsis> Supported architectures </span> </a> </li> <li class=md-nav__item> <a href=#building-on-the-target-architecture class=md-nav__link> <span class=md-ellipsis> Building on the target architecture </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#thread-dumps class=md-nav__link> <span class=md-ellipsis> Thread dumps </span> </a> </li> <li class=md-nav__item> <a href=#heap-dump class=md-nav__link> <span class=md-ellipsis> Heap dump </span> </a> </li> <li class=md-nav__item> <a href=#manual-diagnostics class=md-nav__link> <span class=md-ellipsis> Manual diagnostics </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#support class=md-nav__link> <span class=md-ellipsis> Support </span> </a> </li> <li class=md-nav__item> <a href=#changelog class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=bitbucket><img alt="Atlassian Bitbucket Server" src="https://wac-cdn.atlassian.com/dam/jcr:bf39fc40-3871-491f-98e3-fb2293f57a00/bitbucket-icon-gradient-blue.svg?cdnVersion=696" style=height:35px;width:35px> Bitbucket<a class=headerlink href=#bitbucket title="Permanent link"> ¶</a></h1> <div class="admonition warning"> <p class=admonition-title>Server image deprecation</p> <p>This Docker image has been published as both <code>atlassian/bitbucket</code> and <code>atlassian/bitbucket-server</code> up until February 15, 2024. Both names refer to the same image. However, post-February 15, 2024, the <code>atlassian/bitbucket-server</code> version ceased receiving updates, including both existing and new tags. If you have been using <code>atlassian/bitbucket-server</code>, switch to the <code>atlassian/bitbucket</code> image to ensure access to the latest updates and new tags.</p> </div> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link"> ¶</a></h2> <p>Bitbucket Server is an on-premises source code management solution for Git that's secure, fast, and enterprise grade. Create and manage repositories, set up fine-grained permissions, and collaborate on code - all with the flexibility of your servers.</p> <p>Learn more about Bitbucket Server: <a href=https://www.atlassian.com/software/bitbucket/server>https://www.atlassian.com/software/bitbucket/server</a></p> <p>This Docker container makes it easy to get an instance of Bitbucket up and running.</p> <details class=note open=open> <summary>Embedded OpenSearch</summary> <p>Only Bitbucket versions &lt; 10 include an embedded search server. For backwards-compatibility, by default the image will start both Bitbucket and an embedded OpenSearch. However, this is not a recommended configuration, especially in a clustered environment, and has known issues with shutdown. Instead, we recommend running a separate OpenSearch instance (possibly in another Docker container); see below for instructions on connecting to an external OpenSearch cluster.</p> </details> <p><em><em> If running this image in a production environment, we strongly recommend you run this image using a specific version tag instead of latest. This is because the image referenced by the latest tag changes often and we cannot guarantee that it will be backwards compatible. </em></em></p> <p><strong>Use docker version &gt;= 20.10.10</strong></p> <h2 id=quick-start>Quick Start<a class=headerlink href=#quick-start title="Permanent link"> ¶</a></h2> <p>For the <code>BITBUCKET_HOME</code> directory that is used to store the repository data (amongst other things) we recommend mounting a host directory as a <a href=https://docs.docker.com/engine/tutorials/dockervolumes/#/data-volumes>data volume</a>, or via a named volume.</p> <p>Additionally, if running Bitbucket in Data Center mode it is required that a shared filesystem is mounted.</p> <p>Volume permission is managed by entry scripts. To get started you can use a data volume, or named volumes. In this example we'll use named volumes. <div class=highlight><pre><span></span><code>docker<span class=w> </span>volume<span class=w> </span>create<span class=w> </span>--name<span class=w> </span>bitbucketVolume
docker<span class=w> </span>run<span class=w> </span>-v<span class=w> </span>bitbucketVolume:/var/atlassian/application-data/bitbucket<span class=w> </span>--name<span class=o>=</span><span class=s2>&quot;bitbucket&quot;</span><span class=w> </span>-d<span class=w> </span>-p<span class=w> </span><span class=m>7990</span>:7990<span class=w> </span>-p<span class=w> </span><span class=m>7999</span>:7999<span class=w> </span>atlassian/bitbucket
</code></pre></div> Note that this command can substitute folder paths with named volumes. Start Atlassian Bitbucket Server: <div class=highlight><pre><span></span><code>docker<span class=w> </span>run<span class=w> </span>-v<span class=w> </span>/data/bitbucket:/var/atlassian/application-data/bitbucket<span class=w> </span>--name<span class=o>=</span><span class=s2>&quot;bitbucket&quot;</span><span class=w> </span>-d<span class=w> </span>-p<span class=w> </span><span class=m>7990</span>:7990<span class=w> </span>-p<span class=w> </span><span class=m>7999</span>:7999<span class=w> </span>atlassian/bitbucket
</code></pre></div></p> <div class="admonition success"> <p class=admonition-title>Bitbucket is now available on <a href=http://localhost:7990>http://localhost:7990</a>.</p> </div> <p>Please ensure your container has the necessary resources allocated to it. We recommend 2GiB of memory allocated to accommodate both the application server and the git processes. See <a href=https://confluence.atlassian.com/display/BitbucketServer/Supported+platforms>Supported Platforms</a> for further information.</p> <details class=tip open=open> <summary>If you are using <code>docker-machine</code> on Mac OS X, please use <code>open http://$(docker-machine ip default):7990</code> instead.</summary> </details> <h2 id=common-settings>Common settings<a class=headerlink href=#common-settings title="Permanent link"> ¶</a></h2> <h3 id=verbose-container-entrypoint-logging>Verbose container entrypoint logging<a class=headerlink href=#verbose-container-entrypoint-logging title="Permanent link"> ¶</a></h3> <p>During the startup process of the container, various operations and checks are performed to ensure that the application is configured correctly and ready to run. To help in troubleshooting and to provide transparency into this process, you can enable verbose logging. The <code>VERBOSE_LOGS</code> environment variable enables detailed debug messages to the container's log, offering insights into the actions performed by the entrypoint script.</p> <ul> <li><code>VERBOSE_LOGS</code> (default: false)</li> </ul> <p>Set to <code>true</code> to enable detailed debug messages during the container initialization.</p> <h3 id=reverse-proxy-settings>Reverse Proxy Settings<a class=headerlink href=#reverse-proxy-settings title="Permanent link"> ¶</a></h3> <p>If Bitbucket is run behind a reverse proxy server as <a href=https://confluence.atlassian.com/bitbucketserver/proxying-and-securing-bitbucket-server-776640099.html>described here</a>, then you need to specify extra options to make Bitbucket aware of the setup. They can be controlled via the below environment variables.</p> <ul> <li><code>SERVER_PROXY_NAME</code> (default: NONE)</li> </ul> <p>The reverse proxy's fully qualified hostname.</p> <ul> <li><code>SERVER_PROXY_PORT</code> (default: NONE)</li> </ul> <p>The reverse proxy's port number via which bitbucket is accessed.</p> <ul> <li><code>SERVER_SCHEME</code> (default: http)</li> </ul> <p>The protocol via which bitbucket is accessed. </p> <p>In certain cloud environments (specifically Kubernetes, Heroku and Cloud Foundry), this setting will be superseded by the value of the <code>X-Forwarded-Proto</code> request header if sent by a ingress or load balancer. See <code>SERVER_FORWARD_HEADERS_STRATEGY</code> below to alter this behaviour.</p> <ul> <li><code>SERVER_SECURE</code> (default: false)</li> </ul> <p>Set 'true' if SERVER_SCHEME is 'https'. </p> <ul> <li><code>SERVER_FORWARD_HEADERS_STRATEGY</code> (default: NATIVE in the specified cloud environments, NONE otherwise)</li> </ul> <p>Can be explicitly set to a value of <code>NONE</code> if deploying to a cloud environment (specifically Kubernetes, Heroku and Cloud Foundry) and the preference is for <code>SERVER_SCHEME</code> to be used over the value of the <code>X-Forwarded-Proto</code> request header. A value of NONE will cause X-Forwarded-* headers to no longer take priority when determining the origin of a request, which means the system will return to the default expected state.</p> <h3 id=jvm-configuration-bitbucket-server-50-only>JVM Configuration (Bitbucket Server 5.0 + only)<a class=headerlink href=#jvm-configuration-bitbucket-server-50-only title="Permanent link"> ¶</a></h3> <p>If you need to override Bitbucket Server's default memory configuration or pass additional JVM arguments, use the environment variables below</p> <ul> <li><code>JVM_MINIMUM_MEMORY</code> (default: 512m)</li> </ul> <p>The minimum heap size of the JVM</p> <ul> <li><code>JVM_MAXIMUM_MEMORY</code> (default: 1024m)</li> </ul> <p>The maximum heap size of the JVM</p> <ul> <li><code>JVM_SUPPORT_RECOMMENDED_ARGS</code> (default: NONE)</li> </ul> <p>Additional JVM arguments for Bitbucket Server, such as a custom Java Trust Store</p> <h3 id=application-mode-settings-bitbucket-server-50-only>Application Mode Settings (Bitbucket Server 5.0 + only)<a class=headerlink href=#application-mode-settings-bitbucket-server-50-only title="Permanent link"> ¶</a></h3> <p>This docker image can be run as a <a href=https://confluence.atlassian.com/bitbucketserver/smart-mirroring-776640046.html>Smart Mirror</a> or as part of a <a href=https://confluence.atlassian.com/enterprise/bitbucket-data-center-668468332.html>Data Center</a> cluster. You can specify the following properties to start Bitbucket as a mirror or as a Data Center node:</p> <ul> <li><code>SEARCH_ENABLED</code> (default: true)</li> </ul> <p>Note: This property is not applicable for Bitbucket 10.0.0 onwards, as embedded search was removed in Bitbucket 10.<br> Set 'false' to prevent OpenSearch (previously Elasticsearch) from starting in the container. This should be used if OpenSearch is running remotely, e.g. for if Bitbucket is running in a Data Center cluster. You may also use <code>ELASTICSEARCH_ENABLED</code> to set this property, however this is deprecated in favor of <code>SEARCH_ENABLED</code>.</p> <ul> <li><code>APPLICATION_MODE</code> (default: default)</li> </ul> <p>The mode Bitbucket will run in. This can be set to 'mirror' to start Bitbucket as a Smart Mirror. This will also disable OpenSearch even if <code>SEARCH_ENABLED</code> has not been set to 'false'.</p> <h3 id=database-configuration>Database Configuration<a class=headerlink href=#database-configuration title="Permanent link"> ¶</a></h3> <p>To configure the database automatically on first run, you can provide the following settings:</p> <ul> <li><code>JDBC_DRIVER</code></li> <li><code>JDBC_URL</code></li> <li><code>JDBC_USER</code></li> <li><code>JDBC_PASSWORD</code></li> </ul> <p>Note: Due to licensing restrictions Bitbucket does not ship with a MySQL or Oracle JDBC drivers. To use these databases you will need to copy a suitable driver into the container and restart it. For example, to copy the MySQL driver into a container named "bitbucket", you would do the following:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span>cp<span class=w> </span>mysql-connector-java.x.y.z.jar<span class=w> </span>bitbucket:/var/atlassian/application-data/bitbucket/lib
docker<span class=w> </span>restart<span class=w> </span>bitbucket
</code></pre></div> <p>For more information see <a href=https://confluence.atlassian.com/bitbucketserver/connecting-bitbucket-server-to-an-external-database-776640378.html>Connecting Bitbucket Server to an external database</a>.</p> <h4 id=jdbc-password-encryption>JDBC password encryption<a class=headerlink href=#jdbc-password-encryption title="Permanent link"> ¶</a></h4> <p>Starting from Bitbucket <code>8.13</code> the <code>JDBC</code> password can now be managed via <a href=https://confluence.atlassian.com/bitbucketserver/configuring-bitbucket-with-aws-secrets-manager-1279066293.html>AWS Secrets Manager</a>. For example, a Bitbucket node with a PostgreSQL database and <code>JDBC</code> password management via AWS Secrets Manager might look like:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span>run<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_DRIVER</span><span class=o>=</span>org.postgresql.Driver<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_USER</span><span class=o>=</span>atlbitbucket<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_PASSWORD</span><span class=o>=</span><span class=s2>&quot;{\&quot;region\&quot;:\&quot;us-east-1\&quot;,\&quot;secretId\&quot;:\&quot;mysecret\&quot;,\&quot;secretPointer\&quot;:\&quot;/password\&quot;}&quot;</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_PASSWORD_DECRYPTER_CLASSNAME</span><span class=o>=</span><span class=s2>&quot;com.atlassian.secrets.store.aws.AwsSecretsManagerStore&quot;</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_URL</span><span class=o>=</span>jdbc:postgresql://my.database.host:5432/bitbucket<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-v<span class=w> </span>/data/bitbucket-shared:/var/atlassian/application-data/bitbucket/shared<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--name<span class=o>=</span><span class=s2>&quot;bitbucket&quot;</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>-d<span class=w> </span>-p<span class=w> </span><span class=m>7990</span>:7990<span class=w> </span>-p<span class=w> </span><span class=m>7999</span>:7999<span class=w> </span><span class=se>\</span>
<span class=w>    </span>atlassian/bitbucket
</code></pre></div> <p>Of note here are the two properties; <code>JDBC_PASSWORD</code> and <code>JDBC_PASSWORD_DECRYPTER_CLASSNAME</code> and their corresponding values, where the Secrets Manager coordinates and decryption class name are supplied respectively. </p> <h2 id=other-settings>Other settings<a class=headerlink href=#other-settings title="Permanent link"> ¶</a></h2> <p>As well as the above settings, all settings that are available in the <a href=https://confluence.atlassian.com/bitbucketserver/bitbucket-server-config-properties-776640155.html>bitbucket.properties file</a> can also be provided via Docker environment variables. For a full explanation of converting Bitbucket properties into environment variables see <a href=https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-relaxed-binding>the relevant Spring Boot documentation</a>.</p> <p>To translate a property name into an environment variable:</p> <ul> <li>dot <code>.</code> becomes underscore <code>_</code></li> <li>dash <code>-</code> becomes underscore <code>_</code></li> <li>Example: <code>this.new-property</code> becomes <code>THIS_NEW_PROPERTY</code></li> </ul> <p>For example, a full command-line for a Bitbucket node with a PostgreSQL database, and an external OpenSearch instance might look like:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span>network<span class=w> </span>create<span class=w> </span>--driver<span class=w> </span>bridge<span class=w> </span>--subnet<span class=o>=</span><span class=m>172</span>.18.0.0/16<span class=w> </span>myBitbucketNetwork
docker<span class=w> </span>run<span class=w> </span>--network<span class=o>=</span>myBitbucketNetwork<span class=w> </span>--ip<span class=o>=</span><span class=m>172</span>.18.1.1<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>SEARCH_ENABLED</span><span class=o>=</span><span class=nb>false</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_DRIVER</span><span class=o>=</span>org.postgresql.Driver<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_USER</span><span class=o>=</span>atlbitbucket<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_PASSWORD</span><span class=o>=</span>MYPASSWORDSECRET<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>JDBC_URL</span><span class=o>=</span>jdbc:postgresql://my.database.host:5432/bitbucket<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-e<span class=w> </span><span class=nv>PLUGIN_SEARCH_CONFIG_BASEURL</span><span class=o>=</span>http://my.opensearch.host<span class=w> </span><span class=se>\</span>
<span class=w>    </span>-v<span class=w> </span>/data/bitbucket-shared:/var/atlassian/application-data/bitbucket/shared<span class=w> </span><span class=se>\</span>
<span class=w>    </span>--name<span class=o>=</span><span class=s2>&quot;bitbucket&quot;</span><span class=w> </span><span class=se>\</span>
<span class=w>    </span>-d<span class=w> </span>-p<span class=w> </span><span class=m>7990</span>:7990<span class=w> </span>-p<span class=w> </span><span class=m>7999</span>:7999<span class=w> </span><span class=se>\</span>
<span class=w>    </span>atlassian/bitbucket
</code></pre></div> <h3 id=cluster-settings>Cluster settings<a class=headerlink href=#cluster-settings title="Permanent link"> ¶</a></h3> <p>If running a clustered Bitbucket DC instance, the cluster settings are specified with <code>HAZELCAST_*</code> environment variables. The main ones to be aware of are:</p> <ul> <li><code>HAZELCAST_PORT</code> (<code>hazelcast.port</code>)</li> <li><code>HAZELCAST_GROUP_NAME</code> (<code>hazelcast.group.name</code>)</li> <li><code>HAZELCAST_GROUP_PASSWORD</code> (<code>hazelcast.group.password</code>)</li> </ul> <p>Each clustering type (e.g. AWS/Azure/Multicast/TCP) has its own settings. For more information on clustering Bitbucket, and other properties see <a href=https://confluence.atlassian.com/bitbucketserver/clustering-with-bitbucket-data-center-776640164.html>Clustering with Bitbucket Data Center</a> and <a href=https://confluence.atlassian.com/bitbucketserver/bitbucket-server-config-properties-776640155.html>Clustering with Bitbucket Data Center</a>.</p> <details class=note open=open> <summary>Out-of-scope network configuration</summary> <p>The underlying network should be configured to support the clustering type you are using. How to do this depends on the container management technology, and is beyond the scope of this documentation.</p> </details> <h3 id=jmx-monitoring>JMX Monitoring<a class=headerlink href=#jmx-monitoring title="Permanent link"> ¶</a></h3> <p>JMX monitoring can be enabled with <code>JMX_ENABLED=true</code>. Information on additional settings and available metrics is available in the <a href=https://confluence.atlassian.com/bitbucketserver/enabling-jmx-counters-for-performance-monitoring-776640189.html>Bitbucket JMX documentation</a>.</p> <h2 id=container-configuration>Container Configuration<a class=headerlink href=#container-configuration title="Permanent link"> ¶</a></h2> <ul> <li><code>SET_PERMISSIONS</code> (default: true)</li> </ul> <p>Define whether to set home directory permissions on startup. Set to <code>false</code> to disable this behaviour.</p> <h2 id=shared-directory-and-user-ids>Shared directory and user IDs<a class=headerlink href=#shared-directory-and-user-ids title="Permanent link"> ¶</a></h2> <p>By default the Bitbucket application runs as the user <code>bitbucket</code>, with a UID and GID of 2003. Consequently this UID must have write access to the shared filesystem. If for some reason a different UID must be used, there are a number of options available:</p> <ul> <li>The Docker image can be rebuilt with a different UID.</li> <li>Under Linux, the UID can be remapped using <a href=https://docs.docker.com/engine/security/userns-remap/ >user namespace remapping</a>.</li> </ul> <h2 id=upgrade>Upgrade<a class=headerlink href=#upgrade title="Permanent link"> ¶</a></h2> <p>To upgrade to a more recent version of Bitbucket Server you can simply stop the <code>bitbucket</code> container and start a new one based on a more recent image:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span>stop<span class=w> </span>bitbucket
docker<span class=w> </span>rm<span class=w> </span>bitbucket
docker<span class=w> </span>pull<span class=w> </span>atlassian/bitbucket:&lt;desired_version&gt;
docker<span class=w> </span>run<span class=w> </span>...<span class=w> </span><span class=o>(</span>See<span class=w> </span>above<span class=o>)</span>
</code></pre></div> <p>As your data is stored in the data volume directory on the host it will still be available after the upgrade.</p> <div class="admonition note"> <p class=admonition-title>Please make sure that you <strong>don't</strong> accidentally remove the <code>bitbucket</code> container and its volumes using the <code>-v</code> option.</p> </div> <h2 id=backup>Backup<a class=headerlink href=#backup title="Permanent link"> ¶</a></h2> <p>For evaluations you can use the built-in database that will store its files in the Bitbucket Server home directory. In that case it is sufficient to create a backup archive of the directory on the host that is used as a volume (<code>/data/bitbucket</code> in the example above).</p> <p>The <a href=https://confluence.atlassian.com/display/BitbucketServer/Data+recovery+and+backups>Bitbucket Server Backup Client</a> is currently not supported in the Docker setup. You can however use the <a href=https://confluence.atlassian.com/display/BitbucketServer/Using+Bitbucket+Server+DIY+Backup>Bitbucket Server DIY Backup</a> approach in case you decided to use an external database.</p> <p>Read more about data recovery and backups: <a href=https://confluence.atlassian.com/display/BitbucketServer/Data+recovery+and+backups>https://confluence.atlassian.com/display/BitbucketServer/Data+recovery+and+backups</a></p> <h2 id=shutdown>Shutdown<a class=headerlink href=#shutdown title="Permanent link"> ¶</a></h2> <p>Bitbucket allows a configurable grace period for active operations to finish before termination; by default this is 30s. If sending a <code>docker stop</code> this should be taken into account with the <code>--time</code> flag.</p> <p>Alternatively, the script <code>/shutdown-wait.sh</code> is provided, which will initiate a clean shutdown and wait for the process to complete. This is the recommended method for shutdown in environments which provide for orderly shutdown, e.g. Kubernetes via the <code>preStop</code> hook.</p> <h2 id=versioning>Versioning<a class=headerlink href=#versioning title="Permanent link"> ¶</a></h2> <p>The <code>latest</code> tag matches the most recent version of this repository. Thus using <code>atlassian/bitbucket:latest</code> or <code>atlassian/bitbucket</code> will ensure you are running the most up to date version of this image.</p> <p>Alternatively, you can use a specific minor version of Bitbucket Server by using a version number tag: <code>atlassian/bitbucket:6</code>. This will install the latest <code>6.x.x</code> version that is available.</p> <h2 id=supported-jdk-versions-and-base-images>Supported JDK versions and base images<a class=headerlink href=#supported-jdk-versions-and-base-images title="Permanent link"> ¶</a></h2> <p>All the Atlassian Docker images are now JDK11 and JDK17 (starting from 8.8 version), and generated from the <a href=https://hub.docker.com/_/eclipse-temurin>official Eclipse Temurin OpenJDK Docker images</a>.</p> <p>Starting from 8.18 <a href="https://catalog.redhat.com/software/containers/ubi9/openjdk-17/61ee7c26ed74b2ffb22b07f6?architecture=amd64">UBI based</a> tags are published as well. UBI tags are available in 2 formats: <code>&lt;version&gt;-ubi9</code> and <code>&lt;version&gt;-ubi9-jdk17</code>.</p> <p>The Docker images follow the <a href=https://confluence.atlassian.com/support/atlassian-support-end-of-life-policy-201851003.html>Atlassian Support end-of-life policy</a>; images for unsupported versions of the products remain available but will no longer receive updates or fixes.</p> <p>Historically, we have also generated other versions of the images, including JDK8, Alpine, and 'slim' versions of the JDK. These legacy images still exist in Docker Hub, however they should be considered deprecated, and do not receive updates or fixes.</p> <p>If for some reason you need a different version, see "Building your own image"</p> <h2 id=migration-to-ubi>Migration to UBI<a class=headerlink href=#migration-to-ubi title="Permanent link"> ¶</a></h2> <p>If you have been mounting any files to <code>${JAVA_HOME}</code> directory in <code>eclipse-temurin</code> based container, JAVA_HOME in UBI JDK17 container is set to <code>/usr/lib/jvm/java-17</code>.</p> <p>Also, if you have been mounting and running any custom scripts in the container, UBI-based images may lack some tools and utilities that are available out of the box in <code>eclipse-temurin</code> tags. If that's the case, see <a href=#building-your-own-image>Building your own image</a>.</p> <h2 id=building-your-own-image>Building your own image<a class=headerlink href=#building-your-own-image title="Permanent link"> ¶</a></h2> <ul> <li>Clone the Atlassian repository at https://bitbucket.org/atlassian-docker/docker-atlassian-bitbucket-server/</li> <li>Modify or replace the <a href=https://jinja.palletsprojects.com/ >Jinja</a> templates under <code>config</code>; <em>NOTE</em>: The files must have the <code>.j2</code> extensions. However, you don't have to use template variables if you don't wish.</li> <li>Build the new image with e.g: <code>docker build --tag my-bitbucket-image --build-arg BITBUCKET_VERSION=8.x.x .</code></li> <li>Optionally push to a registry, and deploy.</li> </ul> <h2 id=supported-architectures>Supported architectures<a class=headerlink href=#supported-architectures title="Permanent link"> ¶</a></h2> <p>Currently, Bitbucket container images are built for the <code>linux/amd64</code> and <code>linux/arm64</code> target platforms. The Dockerfiles and support tooling have now had all architecture-specific components removed, so if necessary it is possible to build images for any platform supported by OCI-compliant container runtimes.</p> <h2 id=building-on-the-target-architecture>Building on the target architecture<a class=headerlink href=#building-on-the-target-architecture title="Permanent link"> ¶</a></h2> <p>The simplest method of getting a platform image is to build it on a target machine; see "Building your own image" above.</p> <p>Note: This method is known to work on Mac M1 and AWS ARM64 machines, but has not been extensively tested.</p> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link"> ¶</a></h2> <p>These images include built-in scripts to assist in performing common JVM diagnostic tasks.</p> <h3 id=thread-dumps>Thread dumps<a class=headerlink href=#thread-dumps title="Permanent link"> ¶</a></h3> <p><code>/opt/atlassian/support/thread-dumps.sh</code> can be run via <code>docker exec</code> to easily trigger the collection of thread dumps from the containerized application. For example: <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>my_container<span class=w> </span>/opt/atlassian/support/thread-dumps.sh
</code></pre></div></p> <p>By default, this script will collect 10 thread dumps at 5 second intervals. This can be overridden by passing a custom value for the count and interval, by using <code>-c</code> / <code>--count</code> and <code>-i</code> / <code>--interval</code> respectively. For example, to collect 20 thread dumps at 3 second intervals: <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>my_container<span class=w> </span>/opt/atlassian/support/thread-dumps.sh<span class=w> </span>--count<span class=w> </span><span class=m>20</span><span class=w> </span>--interval<span class=w> </span><span class=m>3</span>
</code></pre></div></p> <p>Thread dumps will be written to <code>$APP_HOME/thread_dumps/&lt;date&gt;</code>.</p> <details class=note open=open> <summary>Disable capturing output from top run</summary> <p>By default this script will also capture output from top run in 'Thread-mode'. This can be disabled by passing <code>-n</code> / <code>--no-top</code></p> </details> <h3 id=heap-dump>Heap dump<a class=headerlink href=#heap-dump title="Permanent link"> ¶</a></h3> <p><code>/opt/atlassian/support/heap-dump.sh</code> can be run via <code>docker exec</code> to easily trigger the collection of a heap dump from the containerized application. For example: <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>my_container<span class=w> </span>/opt/atlassian/support/heap-dump.sh
</code></pre></div></p> <p>A heap dump will be written to <code>$APP_HOME/heap.bin</code>. If a file already exists at this location, use <code>-f</code> / <code>--force</code> to overwrite the existing heap dump file.</p> <h3 id=manual-diagnostics>Manual diagnostics<a class=headerlink href=#manual-diagnostics title="Permanent link"> ¶</a></h3> <p>The <code>jcmd</code> utility is also included in these images and can be used by starting a <code>bash</code> shell in the running container: <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>my_container<span class=w> </span>/bin/bash
</code></pre></div></p> <h2 id=support>Support<a class=headerlink href=#support title="Permanent link"> ¶</a></h2> <p>For product support, go to <a href=https://support.atlassian.com/ >support.atlassian.com</a></p> <p>You can also visit the <a href=https://community.atlassian.com/t5/Atlassian-Data-Center-on/gh-p/DC_Kubernetes>Atlassian Data Center</a> forum for discussion on running Atlassian Data Center products in containers.</p> <h2 id=changelog>Changelog<a class=headerlink href=#changelog title="Permanent link"> ¶</a></h2> <p>For a detailed list of changes to the Docker image configuration see <a href=https://bitbucket.org/atlassian-docker/docker-atlassian-bitbucket-server/commits/ >the Git commit history</a>.</p> <h2 id=license>License<a class=headerlink href=#license title="Permanent link"> ¶</a></h2> <p>Copyright © 2019 Atlassian Corporation Pty Ltd. Licensed under the Apache License, Version 2.0.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; [2024] Atlassian and others. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://community.atlassian.com/t5/Atlassian-Data-Center-on/gh-p/DC_Kubernetes target=_blank rel=noopener title=community.atlassian.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M152.2 236.4c-7.7-8.2-19.7-7.7-24.8 2.8L1.6 490.2c-5 10 2.4 21.7 13.4 21.7h175c5.8.1 11-3.2 13.4-8.4 37.9-77.8 15.1-196.3-51.2-267.1M244.4 8.1c-122.3 193.4-8.5 348.6 65 495.5 2.5 5.1 7.7 8.4 13.4 8.4H497c11.2 0 18.4-11.8 13.4-21.7 0 0-234.5-470.6-240.4-482.3-5.3-10.6-18.8-10.8-25.6.1"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["search.suggest", "search.highlight", "navigation.instant", "navigation.tabs", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>