<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../JIRA/ rel=prev><link href=../BITBUCKET/ rel=next><link rel=icon href=../../assets/logos/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Confluence - Atlassian DC Helm Charts</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-FZ7HCVNVPY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-FZ7HCVNVPY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-FZ7HCVNVPY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#confluence class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <a href=https://community.atlassian.com/t5/Atlassian-Data-Center-on/gh-p/DC_Kubernetes title="Share your feedback with the Atlassian Data Center on Kubernetes Community" style=color:white><strong>Share your feedback and join the discussion</strong></a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Atlassian DC Helm Charts" class="md-header__button md-logo" aria-label="Atlassian DC Helm Charts" data-md-component=logo> <img src=../../assets/logos/atlassian-logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Atlassian DC Helm Charts </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Confluence </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/atlassian/data-center-helm-charts title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> atlassian/data-center-helm-charts </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../userguide/PREREQUISITES/ class=md-tabs__link> User guide </a> </li> <li class=md-tabs__item> <a href=../../examples/EXAMPLES/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../troubleshooting/TROUBLESHOOTING/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../platforms/PLATFORMS/ class=md-tabs__link> Platforms </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../JIRA/ class=md-tabs__link> Containers </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Atlassian DC Helm Charts" class="md-nav__button md-logo" aria-label="Atlassian DC Helm Charts" data-md-component=logo> <img src=../../assets/logos/atlassian-logo.svg alt=logo> </a> Atlassian DC Helm Charts </label> <div class=md-nav__source> <a href=https://github.com/atlassian/data-center-helm-charts title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> atlassian/data-center-helm-charts </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> User guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/PREREQUISITES/ class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/VERIFICATION/ class=md-nav__link> <span class=md-ellipsis> Verification </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/INSTALLATION/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/CONFIGURATION/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/MIGRATION/ class=md-nav__link> <span class=md-ellipsis> Migration </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/OPERATION/ class=md-nav__link> <span class=md-ellipsis> Operation </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class=md-ellipsis> Monitoring </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/monitoring/PROMETHEUS/ class=md-nav__link> <span class=md-ellipsis> Prometheus and Grafana </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/monitoring/PRE_CANNED_CHARTS/ class=md-nav__link> <span class=md-ellipsis> Product specific dashboards </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex=0> <span class=md-ellipsis> Upgrades </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Upgrades </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/upgrades/HELM_CHART_UPGRADE/ class=md-nav__link> <span class=md-ellipsis> Helm chart upgrade </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/upgrades/PRODUCTS_UPGRADE/ class=md-nav__link> <span class=md-ellipsis> Products upgrade </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_9> <label class=md-nav__link for=__nav_2_9 id=__nav_2_9_label tabindex=0> <span class=md-ellipsis> Resource management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_9_label aria-expanded=false> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> Resource management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../userguide/resource_management/JIRA_INDEX_SNAPSHOT/ class=md-nav__link> <span class=md-ellipsis> Creating an initial index snapshot in Jira </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/resource_management/REQUESTS_AND_LIMITS/ class=md-nav__link> <span class=md-ellipsis> Resource requests and limits </span> </a> </li> <li class=md-nav__item> <a href=../../userguide/resource_management/RESOURCE_SCALING/ class=md-nav__link> <span class=md-ellipsis> Product scaling </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/EXAMPLES/ class=md-nav__link> <span class=md-ellipsis> Available examples </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Kubernetes cluster </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Kubernetes cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/cluster/AKS_SETUP/ class=md-nav__link> <span class=md-ellipsis> Preparing an AKS cluster </span> </a> </li> <li class=md-nav__item> <a href=../../examples/cluster/CLOUD_PROVIDERS/ class=md-nav__link> <span class=md-ellipsis> Provisioning Kubernetes clusters on cloud-based providers </span> </a> </li> <li class=md-nav__item> <a href=../../examples/cluster/EKS_SETUP/ class=md-nav__link> <span class=md-ellipsis> Preparing an EKS cluster </span> </a> </li> <li class=md-nav__item> <a href=../../examples/cluster/GKE_SETUP/ class=md-nav__link> <span class=md-ellipsis> Preparing an GKE cluster </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Database </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/database/AMAZON_RDS/ class=md-nav__link> <span class=md-ellipsis> Creating an RDS database instance </span> </a> </li> <li class=md-nav__item> <a href=../../examples/database/CLOUD_PROVIDERS/ class=md-nav__link> <span class=md-ellipsis> Provisioning databases on cloud-based providers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Ingress </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Ingress </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/ingress/CONTROLLERS/ class=md-nav__link> <span class=md-ellipsis> Provisioning an Ingress controller </span> </a> </li> <li class=md-nav__item> <a href=../../examples/ingress/DNS/ class=md-nav__link> <span class=md-ellipsis> Create DNS record via AWS CLI </span> </a> </li> <li class=md-nav__item> <a href=../../examples/ingress/INGRESS_NGINX/ class=md-nav__link> <span class=md-ellipsis> NGINX Ingress Controller - with TLS termination </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/STORAGE/ class=md-nav__link> <span class=md-ellipsis> Shared storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_2> <label class=md-nav__link for=__nav_3_5_2 id=__nav_3_5_2_label tabindex=0> <span class=md-ellipsis> AWS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_2> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/aws/LOCAL_STORAGE/ class=md-nav__link> <span class=md-ellipsis> Local storage </span> </a> </li> <li class=md-nav__item> <a href=../../examples/storage/aws/SHARED_STORAGE/ class=md-nav__link> <span class=md-ellipsis> Shared storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_2_3> <label class=md-nav__link for=__nav_3_5_2_3 id=__nav_3_5_2_3_label tabindex=0> <span class=md-ellipsis> S3 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_5_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_2_3> <span class="md-nav__icon md-icon"></span> S3 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/aws/s3/CONFLUENCE/ class=md-nav__link> <span class=md-ellipsis> AWS S3 Attachments Storage </span> </a> </li> <li class=md-nav__item> <a href=../../examples/storage/aws/s3/JIRA/ class=md-nav__link> <span class=md-ellipsis> AWS S3 Avatars Storage </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_3> <label class=md-nav__link for=__nav_3_5_3 id=__nav_3_5_3_label tabindex=0> <span class=md-ellipsis> NFS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_3> <span class="md-nav__icon md-icon"></span> NFS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/nfs/NFS/ class=md-nav__link> <span class=md-ellipsis> NFS server for Bitbucket </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5_4> <label class=md-nav__link for=__nav_3_5_4 id=__nav_3_5_4_label tabindex=0> <span class=md-ellipsis> Additional Storage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5_4> <span class="md-nav__icon md-icon"></span> Additional Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/storage/additional%20storage/ADDTIONAL_STORAGE/ class=md-nav__link> <span class=md-ellipsis> Additional Storage </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> Bamboo </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Bamboo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/bamboo/REMOTE_AGENTS/ class=md-nav__link> <span class=md-ellipsis> Remote agents </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bamboo/AGENT_CAPABILITIES/ class=md-nav__link> <span class=md-ellipsis> Agent capabilities </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class=md-ellipsis> Bitbucket </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Bitbucket </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_OPENSEARCH/ class=md-nav__link> <span class=md-ellipsis> OpenSearch </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_ELASTICSEARCH/ class=md-nav__link> <span class=md-ellipsis> Elasticsearch (Deprecated) </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_MIRRORS/ class=md-nav__link> <span class=md-ellipsis> Smart Mirrors </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_SSH/ class=md-nav__link> <span class=md-ellipsis> SSH </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_MESH/ class=md-nav__link> <span class=md-ellipsis> Mesh </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_AWS_OPENSEARCH/ class=md-nav__link> <span class=md-ellipsis> Configure AWS OpenSearch with Bitbucket </span> </a> </li> <li class=md-nav__item> <a href=../../examples/bitbucket/BITBUCKET_SESSION_AFFINITY/ class=md-nav__link> <span class=md-ellipsis> Configure Session Stickiness with NGINX Ingress </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class=md-ellipsis> Confluence </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Confluence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/confluence/CONFLUENCE_OPENSEARCH/ class=md-nav__link> <span class=md-ellipsis> Configuring OpenSearch for Confluence </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../examples/logging/efk/EFK/ class=md-nav__link> <span class=md-ellipsis> Logging in a Kubernetes environment </span> </a> </li> <li class=md-nav__item> <a href=../../examples/external_libraries/EXTERNAL_LIBS/ class=md-nav__link> <span class=md-ellipsis> External libraries and plugins </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Troubleshooting </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../troubleshooting/TROUBLESHOOTING/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting tips </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/SUPPORT_BOUNDARIES/ class=md-nav__link> <span class=md-ellipsis> Support boundaries </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/LIMITATIONS/ class=md-nav__link> <span class=md-ellipsis> Limitations </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Platforms </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Platforms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../platforms/PLATFORMS/ class=md-nav__link> <span class=md-ellipsis> Platform information </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Openshift </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Openshift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../platforms/openshift/OPENSHIFT/ class=md-nav__link> <span class=md-ellipsis> Deploy To OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../platforms/openshift/OPENSHIFT_FAQ/ class=md-nav__link> <span class=md-ellipsis> OpenShift FAQs </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Containers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Containers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../JIRA/ class=md-nav__link> <span class=md-ellipsis> Jira </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Confluence </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Confluence </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=#configuring-confluence class=md-nav__link> <span class=md-ellipsis> Configuring Confluence </span> </a> <nav class=md-nav aria-label="Configuring Confluence"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verbose-container-entrypoint-logging class=md-nav__link> <span class=md-ellipsis> Verbose container entrypoint logging </span> </a> </li> <li class=md-nav__item> <a href=#memory-heap-size class=md-nav__link> <span class=md-ellipsis> Memory / Heap Size </span> </a> </li> <li class=md-nav__item> <a href=#tomcat-and-reverse-proxy-settings class=md-nav__link> <span class=md-ellipsis> Tomcat and Reverse Proxy Settings </span> </a> </li> <li class=md-nav__item> <a href=#access-log-settings class=md-nav__link> <span class=md-ellipsis> Access Log Settings </span> </a> </li> <li class=md-nav__item> <a href=#jvm-configuration class=md-nav__link> <span class=md-ellipsis> JVM configuration </span> </a> </li> <li class=md-nav__item> <a href=#confluence-specific-settings class=md-nav__link> <span class=md-ellipsis> Confluence-specific settings </span> </a> </li> <li class=md-nav__item> <a href=#database-configuration class=md-nav__link> <span class=md-ellipsis> Database configuration </span> </a> <nav class=md-nav aria-label="Database configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optional-database-settings class=md-nav__link> <span class=md-ellipsis> Optional database settings </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#data-center-configuration class=md-nav__link> <span class=md-ellipsis> Data Center configuration </span> </a> <nav class=md-nav aria-label="Data Center configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cluster-configuration class=md-nav__link> <span class=md-ellipsis> Cluster configuration </span> </a> <nav class=md-nav aria-label="Cluster configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#common-cluster-settings class=md-nav__link> <span class=md-ellipsis> Common cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#aws-cluster-settings class=md-nav__link> <span class=md-ellipsis> AWS cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#tcp-cluster-settings class=md-nav__link> <span class=md-ellipsis> TCP cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#multicast-cluster-settings class=md-nav__link> <span class=md-ellipsis> Multicast cluster settings </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#container-configuration class=md-nav__link> <span class=md-ellipsis> Container Configuration </span> </a> </li> <li class=md-nav__item> <a href=#advanced-configuration class=md-nav__link> <span class=md-ellipsis> Advanced Configuration </span> </a> <nav class=md-nav aria-label="Advanced Configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#building-your-own-image class=md-nav__link> <span class=md-ellipsis> Building your own image </span> </a> </li> <li class=md-nav__item> <a href=#build-a-new-image-from-the-existing-one class=md-nav__link> <span class=md-ellipsis> Build a new image from the existing one </span> </a> </li> <li class=md-nav__item> <a href=#overwrite-the-templates-at-runtime class=md-nav__link> <span class=md-ellipsis> Overwrite the templates at runtime </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#shared-directory-and-user-ids class=md-nav__link> <span class=md-ellipsis> Shared directory and user IDs </span> </a> </li> <li class=md-nav__item> <a href=#upgrade class=md-nav__link> <span class=md-ellipsis> Upgrade </span> </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> <span class=md-ellipsis> Backup </span> </a> </li> <li class=md-nav__item> <a href=#shutdown class=md-nav__link> <span class=md-ellipsis> Shutdown </span> </a> </li> <li class=md-nav__item> <a href=#versioning class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> <li class=md-nav__item> <a href=#supported-jdk-versions-and-base-images class=md-nav__link> <span class=md-ellipsis> Supported JDK versions and base images </span> </a> </li> <li class=md-nav__item> <a href=#migration-to-ubi class=md-nav__link> <span class=md-ellipsis> Migration to UBI </span> </a> </li> <li class=md-nav__item> <a href=#supported-architectures class=md-nav__link> <span class=md-ellipsis> Supported architectures </span> </a> <nav class=md-nav aria-label="Supported architectures"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#building-on-the-target-architecture class=md-nav__link> <span class=md-ellipsis> Building on the target architecture </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#thread-dumps class=md-nav__link> <span class=md-ellipsis> Thread dumps </span> </a> </li> <li class=md-nav__item> <a href=#heap-dump class=md-nav__link> <span class=md-ellipsis> Heap dump </span> </a> </li> <li class=md-nav__item> <a href=#manual-diagnostics class=md-nav__link> <span class=md-ellipsis> Manual diagnostics </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#support class=md-nav__link> <span class=md-ellipsis> Support </span> </a> </li> <li class=md-nav__item> <a href=#contribution class=md-nav__link> <span class=md-ellipsis> Contribution </span> </a> </li> <li class=md-nav__item> <a href=#changelog class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../BITBUCKET/ class=md-nav__link> <span class=md-ellipsis> Bitbucket </span> </a> </li> <li class=md-nav__item> <a href=../BITBUCKET-MESH/ class=md-nav__link> <span class=md-ellipsis> Bitbucket Mesh </span> </a> </li> <li class=md-nav__item> <a href=../BAMBOO-AGENT/ class=md-nav__link> <span class=md-ellipsis> Bamboo Agent </span> </a> </li> <li class=md-nav__item> <a href=../BAMBOO/ class=md-nav__link> <span class=md-ellipsis> Bamboo </span> </a> </li> <li class=md-nav__item> <a href=../CROWD/ class=md-nav__link> <span class=md-ellipsis> Crowd </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#quick-start class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=#configuring-confluence class=md-nav__link> <span class=md-ellipsis> Configuring Confluence </span> </a> <nav class=md-nav aria-label="Configuring Confluence"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verbose-container-entrypoint-logging class=md-nav__link> <span class=md-ellipsis> Verbose container entrypoint logging </span> </a> </li> <li class=md-nav__item> <a href=#memory-heap-size class=md-nav__link> <span class=md-ellipsis> Memory / Heap Size </span> </a> </li> <li class=md-nav__item> <a href=#tomcat-and-reverse-proxy-settings class=md-nav__link> <span class=md-ellipsis> Tomcat and Reverse Proxy Settings </span> </a> </li> <li class=md-nav__item> <a href=#access-log-settings class=md-nav__link> <span class=md-ellipsis> Access Log Settings </span> </a> </li> <li class=md-nav__item> <a href=#jvm-configuration class=md-nav__link> <span class=md-ellipsis> JVM configuration </span> </a> </li> <li class=md-nav__item> <a href=#confluence-specific-settings class=md-nav__link> <span class=md-ellipsis> Confluence-specific settings </span> </a> </li> <li class=md-nav__item> <a href=#database-configuration class=md-nav__link> <span class=md-ellipsis> Database configuration </span> </a> <nav class=md-nav aria-label="Database configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optional-database-settings class=md-nav__link> <span class=md-ellipsis> Optional database settings </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#data-center-configuration class=md-nav__link> <span class=md-ellipsis> Data Center configuration </span> </a> <nav class=md-nav aria-label="Data Center configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cluster-configuration class=md-nav__link> <span class=md-ellipsis> Cluster configuration </span> </a> <nav class=md-nav aria-label="Cluster configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#common-cluster-settings class=md-nav__link> <span class=md-ellipsis> Common cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#aws-cluster-settings class=md-nav__link> <span class=md-ellipsis> AWS cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#tcp-cluster-settings class=md-nav__link> <span class=md-ellipsis> TCP cluster settings </span> </a> </li> <li class=md-nav__item> <a href=#multicast-cluster-settings class=md-nav__link> <span class=md-ellipsis> Multicast cluster settings </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#container-configuration class=md-nav__link> <span class=md-ellipsis> Container Configuration </span> </a> </li> <li class=md-nav__item> <a href=#advanced-configuration class=md-nav__link> <span class=md-ellipsis> Advanced Configuration </span> </a> <nav class=md-nav aria-label="Advanced Configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#building-your-own-image class=md-nav__link> <span class=md-ellipsis> Building your own image </span> </a> </li> <li class=md-nav__item> <a href=#build-a-new-image-from-the-existing-one class=md-nav__link> <span class=md-ellipsis> Build a new image from the existing one </span> </a> </li> <li class=md-nav__item> <a href=#overwrite-the-templates-at-runtime class=md-nav__link> <span class=md-ellipsis> Overwrite the templates at runtime </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#shared-directory-and-user-ids class=md-nav__link> <span class=md-ellipsis> Shared directory and user IDs </span> </a> </li> <li class=md-nav__item> <a href=#upgrade class=md-nav__link> <span class=md-ellipsis> Upgrade </span> </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> <span class=md-ellipsis> Backup </span> </a> </li> <li class=md-nav__item> <a href=#shutdown class=md-nav__link> <span class=md-ellipsis> Shutdown </span> </a> </li> <li class=md-nav__item> <a href=#versioning class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> <li class=md-nav__item> <a href=#supported-jdk-versions-and-base-images class=md-nav__link> <span class=md-ellipsis> Supported JDK versions and base images </span> </a> </li> <li class=md-nav__item> <a href=#migration-to-ubi class=md-nav__link> <span class=md-ellipsis> Migration to UBI </span> </a> </li> <li class=md-nav__item> <a href=#supported-architectures class=md-nav__link> <span class=md-ellipsis> Supported architectures </span> </a> <nav class=md-nav aria-label="Supported architectures"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#building-on-the-target-architecture class=md-nav__link> <span class=md-ellipsis> Building on the target architecture </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#thread-dumps class=md-nav__link> <span class=md-ellipsis> Thread dumps </span> </a> </li> <li class=md-nav__item> <a href=#heap-dump class=md-nav__link> <span class=md-ellipsis> Heap dump </span> </a> </li> <li class=md-nav__item> <a href=#manual-diagnostics class=md-nav__link> <span class=md-ellipsis> Manual diagnostics </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#support class=md-nav__link> <span class=md-ellipsis> Support </span> </a> </li> <li class=md-nav__item> <a href=#contribution class=md-nav__link> <span class=md-ellipsis> Contribution </span> </a> </li> <li class=md-nav__item> <a href=#changelog class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=confluence><img alt="Atlassian Confluence Server" src="https://wac-cdn.atlassian.com/dam/jcr:5d1374c2-276f-4bca-9ce4-813aba614b7a/confluence-icon-gradient-blue.svg?cdnVersion=696" style=height:35px;width:35px> Confluence<a class=headerlink href=#confluence title="Permanent link"> ¶</a></h1> <div class="admonition warning"> <p class=admonition-title>Server image deprecation</p> <p>This Docker image has been published as both <code>atlassian/confluence</code> and <code>atlassian/confluence-server</code> up until February 15, 2024. Both names refer to the same image. However, post-February 15, 2024, the <code>atlassian/confluence-server</code> version ceased receiving updates, including both existing and new tags. If you have been using <code>atlassian/confluence-server</code>, switch to the <code>atlassian/confluence</code> image to ensure access to the latest updates and new tags.</p> </div> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link"> ¶</a></h2> <p>Confluence Server is where you create, organise and discuss work with your team. Capture the knowledge that's too often lost in email inboxes and shared network drives in Confluence - where it's easy to find, use, and update. Give every team, project, or department its own space to create the things they need, whether it's meeting notes, product requirements, file lists, or project plans, you can get more done in Confluence.</p> <p>This Docker container makes it easy to get an instance of Confluence up and running.</p> <p>Learn more about Confluence Server: <a href=https://www.atlassian.com/software/confluence>https://www.atlassian.com/software/confluence</a></p> <p>You can find the repository with the Dockerfile at <a href=https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server>https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server</a></p> <p>DockerHub repository: <a href=https://hub.docker.com/r/atlassian/confluence>https://hub.docker.com/r/atlassian/confluence</a></p> <p><strong>Use docker version &gt;= 20.10.10</strong></p> <h2 id=quick-start>Quick Start<a class=headerlink href=#quick-start title="Permanent link"> ¶</a></h2> <p>For the directory in the environmental variable <code>CONFLUENCE_HOME</code> that is used to store Confluence data (amongst other things) we recommend mounting a host directory as a <a href=https://docs.docker.com/userguide/dockervolumes/#mount-a-host-directory-as-a-data-volume>data volume</a>:</p> <p>Additionally, if running Confluence in Data Center mode it is required that a shared filesystem is mounted. The mountpoint (inside the container) can be configured with <code>CONFLUENCE_SHARED_HOME</code>.</p> <p>Start Atlassian Confluence Server: <div class=highlight><pre><span></span><code>docker<span class=w> </span>run<span class=w> </span>-v<span class=w> </span>/data/your-confluence-home:/var/atlassian/application-data/confluence<span class=w> </span>--name<span class=o>=</span><span class=s2>&quot;confluence&quot;</span><span class=w> </span>-d<span class=w> </span>-p<span class=w> </span><span class=m>8090</span>:8090<span class=w> </span>-p<span class=w> </span><span class=m>8091</span>:8091<span class=w> </span>atlassian/confluence
</code></pre></div></p> <div class="admonition success"> <p class=admonition-title>Confluence is now available on <a href=http://localhost:8090>http://localhost:8090</a>.</p> </div> <p>Please ensure your container has the necessary resources allocated to it. We recommend 2GiB of memory allocated to accommodate the application server. See <a href=https://confluence.atlassian.com/display/DOC/Supported+platforms>Supported Platforms</a> for further information.</p> <details class=tip open=open> <summary>If you are using <code>docker-machine</code> on Mac OS X, please use <code>open http://$(docker-machine ip default):8090</code> instead.</summary> </details> <h2 id=configuring-confluence>Configuring Confluence<a class=headerlink href=#configuring-confluence title="Permanent link"> ¶</a></h2> <p>This Docker image is intended to be configured from its environment; the provided information is used to generate the application configuration files from templates. This allows containers to be repeatably created and destroyed on-the-fly, as required in advanced cluster configurations. Most aspects of the deployment can be configured in this manner; the necessary environment variables are documented below. However, if your particular deployment scenario is not covered by these settings, it is possible to override the provided templates with your own; see the section <a href=#advanced-configuration>Advanced Configuration</a> below.</p> <h3 id=verbose-container-entrypoint-logging>Verbose container entrypoint logging<a class=headerlink href=#verbose-container-entrypoint-logging title="Permanent link"> ¶</a></h3> <p>During the startup process of the container, various operations and checks are performed to ensure that the application is configured correctly and ready to run. To help in troubleshooting and to provide transparency into this process, you can enable verbose logging. The <code>VERBOSE_LOGS</code> environment variable enables detailed debug messages to the container's log, offering insights into the actions performed by the entrypoint script.</p> <ul> <li><code>VERBOSE_LOGS</code> (default: false)</li> </ul> <p>Set to <code>true</code> to enable detailed debug messages during the container initialization.</p> <h3 id=memory-heap-size>Memory / Heap Size<a class=headerlink href=#memory-heap-size title="Permanent link"> ¶</a></h3> <p>If you need to override Confluence Server's default memory allocation, you can control the minimum heap (Xms) and maximum heap (Xmx) via the below environment variables.</p> <ul> <li><code>JVM_MINIMUM_MEMORY</code> (default: 1024m)</li> </ul> <p>The minimum heap size of the JVM</p> <ul> <li><code>JVM_MAXIMUM_MEMORY</code> (default: 1024m)</li> </ul> <p>The maximum heap size of the JVM</p> <ul> <li> <p><code>JVM_RESERVED_CODE_CACHE_SIZE</code> (default: 256m)</p> <p>The reserved code cache size of the JVM</p> </li> </ul> <h3 id=tomcat-and-reverse-proxy-settings>Tomcat and Reverse Proxy Settings<a class=headerlink href=#tomcat-and-reverse-proxy-settings title="Permanent link"> ¶</a></h3> <p>If Confluence is run behind a reverse proxy server (e.g. a load-balancer or nginx server), then you need to specify extra options to make Confluence aware of the setup. They can be controlled via the below environment variables.</p> <ul> <li><code>ATL_PROXY_NAME</code> (default: NONE)</li> </ul> <p>The reverse proxy's fully qualified hostname. <code>CATALINA_CONNECTOR_PROXYNAME</code> is also supported for backwards compatability.</p> <ul> <li><code>ATL_PROXY_PORT</code> (default: NONE)</li> </ul> <p>The reverse proxy's port number via which Confluence is accessed. <code>CATALINA_CONNECTOR_PROXYPORT</code> is also supported for backwards compatability.</p> <ul> <li><code>ATL_TOMCAT_PORT</code> (default: 8090)</li> </ul> <p>The port for Tomcat/Confluence to listen on. Depending on your container deployment method this port may need to be [exposed and published][docker-expose].</p> <ul> <li><code>ATL_TOMCAT_SCHEME</code> (default: http)</li> </ul> <p>The protocol via which Confluence is accessed. <code>CATALINA_CONNECTOR_SCHEME</code> is also supported for backwards compatability.</p> <ul> <li><code>ATL_TOMCAT_SECURE</code> (default: false)</li> </ul> <p>Set 'true' if <code>ATL_TOMCAT_SCHEME</code> is 'https'. <code>CATALINA_CONNECTOR_SECURE</code> is also supported for backwards compatability.</p> <ul> <li><code>ATL_TOMCAT_CONTEXTPATH</code> (default: NONE)</li> </ul> <p>The context path the application is served over. <code>CATALINA_CONTEXT_PATH</code> is also supported for backwards compatability.</p> <ul> <li><code>ATL_TOMCAT_ACCESS_LOG</code> (default: false [version &lt; 7.11.0] and true [version &gt;=7.11.0])</li> </ul> <p>Whether to enable Tomcat access logging; set to <code>true</code> to enable. <em>NOTE</em>: These logs are written to the Container internal volume by default (under <code>/opt/atlassian/confluence/logs/</code>); these are rotated but not removed, and will grow indefinitely. If you enable this functionality it is recommended that you map the directory to a volume and perform log ingestion/cleanup with external tools.</p> <ul> <li><code>ATL_TOMCAT_REQUESTATTRIBUTESENABLED</code></li> </ul> <p>Checks for the existence of request attributes (typically set by the RemoteIpValve and similar) that should be used to override the values returned by the request for remote address, remote host, server port and protocol. This property is usually combined with <code>ATL_TOMCAT_TRUSTEDPROXIES</code> and <code>ATL_TOMCAT_INTERNALPROXIES</code> to show IP address of the remote host instead of the load balancer's. If not declared, the default value of <code>false</code> will be used.</p> <ul> <li><code>ATL_TOMCAT_TRUSTEDPROXIES</code></li> </ul> <p>A list of IP addresses separated by a pipe character e.g. <code>10.0.9.6|10.0.9.32</code>.<br> Trusted proxies that appear in the <code>remoteIpHeader</code> will be trusted and <em>will appear</em> in the <code>proxiesHeader</code> value. By adding a list of Trusted Proxies, Confluence will remove the load balancers' IP addresses from Confluence's view of the incoming connection. This could be desired in a clustered load balancer architecture where the load balancer address changes depending on which node proxies the connection. If not specified, no trusted proxies will be trusted.</p> <ul> <li><code>ATL_TOMCAT_INTERNALPROXIES</code></li> </ul> <p>A list of IP addresses separated by a pipe character e.g. <code>10.0.9.6|10.0.9.32</code>.<br> Trusted proxies that appear in the <code>remoteIpHeader</code> will be trusted and <em>will not appear</em> in the <code>proxiesHeader</code> value. By adding a list of Internal Proxies, Confluence will remove the load balancers' IP addresses from Confluence's view of the incoming connection. This could be desired in a clustered load balancer architecture where the load balancer address changes depending on which node proxies the connection. If not specified, no internal proxies will be trusted.</p> <ul> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_PORT</code> - If unset, no additional connector is defined in server.xml. No default.</li> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_CONNECTION_TIMEOUT</code> (default: 20000)</li> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_MAX_THREADS</code> (default: 50)</li> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_MIN_SPARE_THREADS</code> (default: 10)</li> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_ENABLE_LOOKUPS</code> (default: false)</li> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_ACCEPT_COUNT</code> (default: 10)</li> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_URI_ENCODING</code> (default: UTF-8)</li> <li><code>ATL_TOMCAT_ADDITIONAL_CONNECTOR_SECURE</code> (no default, if undefined secure is not set in the connector)</li> </ul> <p>The following Tomcat/Catalina options are also supported. For more information, see <a href=https://tomcat.apache.org/tomcat-7.0-doc/config/index.html>https://tomcat.apache.org/tomcat-7.0-doc/config/index.html</a>. </p> <ul> <li><code>ATL_TOMCAT_MGMT_PORT</code> (default: 8000)</li> <li><code>ATL_TOMCAT_MAXTHREADS</code> (default: 48)</li> <li><code>ATL_TOMCAT_MINSPARETHREADS</code> (default: 10)</li> <li><code>ATL_TOMCAT_CONNECTIONTIMEOUT</code> (default: 20000)</li> <li><code>ATL_TOMCAT_ENABLELOOKUPS</code> (default: false)</li> <li><code>ATL_TOMCAT_PROTOCOL</code> (default: org.apache.coyote.http11.Http11NioProtocol)</li> <li><code>ATL_TOMCAT_REDIRECTPORT</code> (default: 8443)</li> <li><code>ATL_TOMCAT_ACCEPTCOUNT</code> (default: 10)</li> <li><code>ATL_TOMCAT_DEBUG</code> (default: 0)</li> <li><code>ATL_TOMCAT_URIENCODING</code> (default: UTF-8)</li> <li><code>ATL_TOMCAT_MAXHTTPHEADERSIZE</code> (default: 8192)</li> <li><code>ATL_TOMCAT_STUCKTHREADDETECTIONVALVE_THRESHOLD</code> (default: 60)</li> </ul> <h3 id=access-log-settings>Access Log Settings<a class=headerlink href=#access-log-settings title="Permanent link"> ¶</a></h3> <p>You can set the maximum number of days for access logs to be retained before being deleted. The default value of -1 means never delete old files.</p> <ul> <li><code>ATL_TOMCAT_ACCESS_LOGS_MAXDAYS</code> (default: -1)</li> <li><code>ATL_TOMCAT_ACCESS_LOG_PATTERN</code> (default: <code>%h %{X-AUSERNAME}o %t &amp;quot;%r&amp;quot; %s %b %D %U %I &amp;quot;%{User-Agent}i&amp;quot;</code>)</li> </ul> <h3 id=jvm-configuration>JVM configuration<a class=headerlink href=#jvm-configuration title="Permanent link"> ¶</a></h3> <p>If you need to pass additional JVM arguments to Confluence such as specifying a custom trust store, you can add them via the below environment variable</p> <ul> <li><code>JVM_SUPPORT_RECOMMENDED_ARGS</code></li> </ul> <p>Additional JVM arguments for Confluence.</p> <details class=example> <summary>Example</summary> <p><code>docker run -e JVM_SUPPORT_RECOMMENDED_ARGS=-Djavax.net.ssl.trustStore=/var/atlassian/application-data/confluence/cacerts -v confluenceVolume:/var/atlassian/application-data/confluence --name="confluence" -d -p 8090:8090 -p 8091:8091 atlassian/confluence</code></p> </details> <p>For additional settings that can be supplied, see: <a href=https://confluence.atlassian.com/doc/recognized-system-properties-190430.html>Recognized System Properties</a></p> <h3 id=confluence-specific-settings>Confluence-specific settings<a class=headerlink href=#confluence-specific-settings title="Permanent link"> ¶</a></h3> <ul> <li><code>ATL_AUTOLOGIN_COOKIE_AGE</code> (default: 1209600; two weeks, in seconds)</li> </ul> <p>The maximum time a user can remain logged-in with 'Remember Me'.</p> <ul> <li><code>CONFLUENCE_HOME</code></li> </ul> <p>The confluence home directory. This may be on an mounted volume; if so it should be writable by the user <code>confluence</code>. See note below about UID mappings.</p> <ul> <li><code>ATL_LUCENE_INDEX_DIR</code></li> </ul> <p>The directory where <a href=https://lucene.apache.org/ >Lucene</a> search indexes should be stored. Defaults to <code>index</code> under the Confluence home directory.</p> <ul> <li><code>ATL_LICENSE_KEY</code> (from Confluence 7.9 onwards)</li> </ul> <p>The Confluence license string. Providing this will remove the need to supply it through the web startup screen.</p> <ul> <li><strong>use with caution</strong> <code>CONFLUENCE_LOG_STDOUT</code> <code>[true, false]</code> (from Confluence 7.9 onwards)</li> </ul> <p>Prior to Confluence version 7.9.0, the log files are always stored in the <code>logs</code> folder in Confluence home. From version 7.9.0, the logs can be printed directly to the <code>stdout</code> and don't use the file at all. This makes it possible to fetch the log messages via <code>docker logs &lt;CONTAINER_ID&gt;</code>. In this setup we recommend using some log aggregation tooling (e.g. AWS Cloudwatch or ELK stack).</p> <p><strong>Beware, if enabled, the support ZIP produced by the Troubleshooting and Support plugin doesn't contain the application logs.</strong></p> <ul> <li> <p><code>ATL_SEARCH_PLATFORM</code></p> <p>The search platform to use. Set to <code>opensearch</code> if you want to use OpenSearch as the search platform. See: https://confluence.atlassian.com/doc/configuring-opensearch-for-confluence-1387594125.html</p> </li> <li> <p><code>ATL_OPENSEARCH_HTTP_URL</code></p> <p>HTTP(S) URL of the OpenSearch cluster, or multiple URLs separated by commas.</p> </li> <li> <p><code>ATL_OPENSEARCH_USERNAME</code></p> <p>Username for the OpenSearch cluster.</p> </li> <li> <p><code>ATL_OPENSEARCH_PASSWORD</code></p> </li> </ul> <p>Password for the OpenSearch cluster.</p> <ul> <li><code>ATL_CONFLUENCE_SESSION_TIMEOUT</code></li> </ul> <p>The default Tomcat session timeout (in minutes) for all newly created sessions which is set in web.xml. Defaults to 30.</p> <ul> <li> <p><code>ATL_CONFLUENCE_CFG_ADDITIONAL_PROPERTIES</code></p> <p>Additional properties to be added to <code>confluence.cfg.xml</code>. The properties should be in the format <code>key=value</code> and separated by a comma. For example, <code>ATL_CONFLUENCE_CFG_ADDITIONAL_PROPERTIES=confluence.cluster.node.name=node1,confluence.cluster.node.server=server1</code>.</p> </li> </ul> <h3 id=database-configuration>Database configuration<a class=headerlink href=#database-configuration title="Permanent link"> ¶</a></h3> <p>It is optionally possible to configure the database from the environment, avoiding the need to do so through the web startup screen.</p> <p>The following variables are all must all be supplied if using this feature:</p> <ul> <li><code>ATL_JDBC_URL</code></li> </ul> <p>The database URL; this is database-specific. It is allowed to use <code>&amp;</code> in the URL which will be automatically converted to <code>&amp;amp;</code>.</p> <ul> <li><code>ATL_JDBC_USER</code></li> </ul> <p>The database user to connect as.</p> <ul> <li><code>ATL_JDBC_PASSWORD</code></li> </ul> <p>The password for the database user.</p> <ul> <li><code>ATL_DB_TYPE</code></li> </ul> <p>The type of database; valid supported values are:</p> <ul> <li><code>mssql</code></li> <li><code>mysql</code></li> <li><code>oracle12c</code> (Confluence 7.3.0 or earlier only)</li> <li><code>oracle</code> (Confluence 7.3.1 or later only. Compatible with Oracle 12c and Oracle 19c)</li> <li><code>postgresql</code></li> </ul> <details class=note open=open> <summary>MySQL or Oracle JDBC drivers</summary> <p>Due to licensing restrictions Confluence does not ship with a MySQL or Oracle JDBC drivers. To use these databases you will need to copy a suitable driver into the container and restart it. For example, to copy the MySQL driver into a container named "confluence", you would do the following:</p> <p><code>docker cp mysql-connector-java.x.y.z.jar confluence:/opt/atlassian/confluence/confluence/WEB-INF/lib</code></p> <p><code>docker restart confluence</code></p> </details> <p>For more information see the <a href=https://confluence.atlassian.com/doc/database-jdbc-drivers-171742.html>Database JDBC Drivers</a> page.</p> <h4 id=optional-database-settings>Optional database settings<a class=headerlink href=#optional-database-settings title="Permanent link"> ¶</a></h4> <ul> <li><code>ATL_JDBC_SECRET_CLASS</code></li> </ul> <p><a href=https://confluence.atlassian.com/doc/encrypt-database-password-1115674739.html>Encryption class</a> for the database password. Depending on the secret class, the value of <code>ATL_JDBC_PASSWORD</code> will differ. Defaults to plaintext. </p> <div class="admonition warning"> <p class=admonition-title>JDBC encryption can only be used with Confluence instances that have already been set up.</p> </div> <p>Starting from 8.6 <a href=https://confluence.atlassian.com/doc/configuring-confluence-with-aws-secrets-manager-1299911239.html>AWS SecretsManager</a> is supported.</p> <p>For non-clustered Confluence, manually edit <code>jdbc.password.decrypter.classname</code> and <code>hibernate.connection.password</code> properties as instructed by step 5 of official <a href=https://confluence.atlassian.com/doc/configuring-confluence-with-aws-secrets-manager-1299911239.html>documentation</a>, then restart container. </p> <p>For clustered Confluence, set this property while making sure environment variables in <a href=#cluster-configuration>cluster configuration</a> are kept intact as well. Example: <div class=highlight><pre><span></span><code>docker<span class=w> </span>run<span class=w> </span>-v<span class=w> </span>/data/your-confluence-home:/var/atlassian/application-data/confluence<span class=w> </span><span class=se>\</span>
--name<span class=o>=</span><span class=s2>&quot;confluence&quot;</span><span class=w> </span>-d<span class=w> </span>-p<span class=w> </span><span class=m>8090</span>:8090<span class=w> </span>-p<span class=w> </span><span class=m>8091</span>:8091<span class=w> </span><span class=se>\</span>
-e<span class=w> </span><span class=nv>ATL_JDBC_SECRET_CLASS</span><span class=o>=</span><span class=s1>&#39;com.atlassian.secrets.store.aws.AwsSecretsManagerStore&#39;</span><span class=w> </span><span class=se>\</span>
-e<span class=w> </span><span class=nv>ATL_JDBC_PASSWORD</span><span class=o>=</span><span class=s1>&#39;{&quot;region&quot;: &quot;us-east-1&quot;, &quot;secretId&quot;: &quot;mysecret&quot;, &quot;secretPointer&quot;: &quot;/password&quot;}&#39;</span><span class=w> </span><span class=se>\</span>
-e<span class=w> </span><span class=nv>ATL_CLUSTER_RELATED_VARIABLES</span><span class=o>=</span><span class=s1>&#39;variable-value&#39;</span><span class=w> </span><span class=se>\</span>
atlassian/confluence
</code></pre></div></p> <p>The following variables are for the database connection pool, and are optional.</p> <ul> <li><code>ATL_DB_POOLMINSIZE</code> (default: 20)</li> <li><code>ATL_DB_POOLMAXSIZE</code> (default: 100)</li> <li><code>ATL_DB_TIMEOUT</code> (default: 30)</li> <li><code>ATL_DB_IDLETESTPERIOD</code> (default: 100)</li> <li><code>ATL_DB_MAXSTATEMENTS</code> (default: 0)</li> <li><code>ATL_DB_VALIDATE</code> (default: false)</li> <li><code>ATL_DB_ACQUIREINCREMENT</code> (default: 1)</li> <li><code>ATL_DB_VALIDATIONQUERY</code> (default: "select 1")</li> <li><code>ATL_DB_PROVIDER_CLASS</code> (default: <code>com.atlassian.confluence.impl.hibernate.DelegatingHikariConnectionProvider</code>)</li> <li><code>ATL_DB_CONNECTION_AUTOCOMMIT</code> (default false)</li> <li><code>ATL_DB_CONNECTION_ISOLATION</code> (default 2)</li> <li><code>ATL_DB_DATASOURCE_HIKARI_REGISTER_MBEANS</code> (default true)</li> </ul> <h3 id=data-center-configuration>Data Center configuration<a class=headerlink href=#data-center-configuration title="Permanent link"> ¶</a></h3> <p>This docker image can be run as part of a <a href=https://confluence.atlassian.com/doc/confluence-data-center-technical-overview-790795847.html>Data Center</a> cluster. You can specify the following properties to start Confluence as a Data Center node, instead of manually configuring a cluster. See <a href=https://confluence.atlassian.com/doc/installing-confluence-data-center-203603.html>Installing Confluence Data Center</a> for more information.</p> <h4 id=cluster-configuration>Cluster configuration<a class=headerlink href=#cluster-configuration title="Permanent link"> ¶</a></h4> <p>Confluence Data Center allows clustering via various methods. For more information on the setting for each type see <a href=https://confluence.atlassian.com/doc/change-node-discovery-from-multicast-to-tcp-ip-or-aws-792297728.html#ChangeNodeDiscoveryfromMulticasttoTCP/IPorAWS-TochangefromTCP/IPtomulticast>this page</a>.</p> <p><strong>NOTE:</strong> The underlying network should be set-up to support the Confluence clustering type you are using. How to do this depends on the container management technology, and is beyond the scope of this documentation.</p> <h5 id=common-cluster-settings>Common cluster settings<a class=headerlink href=#common-cluster-settings title="Permanent link"> ¶</a></h5> <ul> <li><code>ATL_CLUSTER_TYPE</code></li> </ul> <p>The cluster type. Setting this effectively enables clustering. Valid values are <code>aws</code>, <code>multicast</code>, and <code>tcp_ip</code>.</p> <ul> <li><code>ATL_CLUSTER_NAME</code></li> </ul> <p>The cluster name; this should be common across all nodes.</p> <ul> <li><code>ATL_PRODUCT_HOME_SHARED</code></li> </ul> <p>The location of the shared home directory for all Confluence nodes. <strong>Note</strong>: This must be real shared filesystem that is mounted inside the container. Additionally, see the note about UIDs.</p> <ul> <li><code>ATL_CLUSTER_TTL</code></li> </ul> <p>The time-to-live for cluster packets. Primarily of use in multicast clusters.</p> <ul> <li><code>ATL_CLUSTER_INTERFACE</code></li> </ul> <p>The network interface Confluence will use to communicate between nodes. Auto-detected by default. <a href=https://confluence.atlassian.com/doc/data-center-troubleshooting-203618.html#DataCenterTroubleshooting-Changemulticastinterface>Override interface</a> if Confluence has selected the wrong one.</p> <h5 id=aws-cluster-settings>AWS cluster settings<a class=headerlink href=#aws-cluster-settings title="Permanent link"> ¶</a></h5> <p>The following should be populated from the AWS environment.</p> <ul> <li><code>ATL_HAZELCAST_NETWORK_AWS_IAM_ROLE</code></li> <li><code>ATL_HAZELCAST_NETWORK_AWS_IAM_REGION</code></li> <li><code>ATL_HAZELCAST_NETWORK_AWS_HOST_HEADER</code></li> <li><code>ATL_HAZELCAST_NETWORK_AWS_SECURITY_GROUP</code></li> <li><code>ATL_HAZELCAST_NETWORK_AWS_TAG_KEY</code></li> <li><code>ATL_HAZELCAST_NETWORK_AWS_TAG_VALUE</code></li> </ul> <h5 id=tcp-cluster-settings>TCP cluster settings<a class=headerlink href=#tcp-cluster-settings title="Permanent link"> ¶</a></h5> <ul> <li><code>ATL_CLUSTER_PEERS</code></li> </ul> <p>A comma-separated list of peer IPs.</p> <h5 id=multicast-cluster-settings>Multicast cluster settings<a class=headerlink href=#multicast-cluster-settings title="Permanent link"> ¶</a></h5> <ul> <li><code>ATL_CLUSTER_ADDRESS</code></li> </ul> <p>The multicast address the cluster will communicate on.</p> <h3 id=container-configuration>Container Configuration<a class=headerlink href=#container-configuration title="Permanent link"> ¶</a></h3> <ul> <li><code>ATL_FORCE_CFG_UPDATE</code> (default: false)</li> </ul> <p>The Docker <a href=https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server/src/master/entrypoint.py>entrypoint</a> generates application configuration on first start; not all of these files are regenerated on subsequent starts. This is deliberate, to avoid race conditions or overwriting manual changes during restarts and upgrades. However in deployments where configuration is purely specified through the environment (e.g. Kubernetes) this behaviour may be undesirable; this flag forces an update of all generated files.</p> <p>In Confluence the affected files are: <code>confluence.cfg.xml</code></p> <p>See <a href=https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server/src/master/entrypoint.py>the entrypoint code</a> for the details of how configuration files are generated.</p> <ul> <li><code>SET_PERMISSIONS</code> (default: true)</li> </ul> <p>Define whether to set home directory permissions on startup. Set to <code>false</code> to disable this behaviour.</p> <ul> <li><code>ATL_UNSET_SENSITIVE_ENV_VARS</code> (default: true)</li> </ul> <p>Define whether to unset environment variables containing keywords 'PASS', 'SECRET' or 'TOKEN'. The unset function is executed in the entrypoint. Set to <code>false</code> if you want to allow passing sensitive environment variables to Confluence container.</p> <details class=warning open=open> <summary>Value exposure on host OS</summary> <p>When using this property, the values to sensitive environment variables will be available in clear text on the host OS. As such, this data may be exposed to users or processes running on the host OS.</p> </details> <ul> <li><code>ATL_ALLOWLIST_SENSITIVE_ENV_VARS</code></li> </ul> <p>Define a comma separated list of environment variables containing keywords 'PASS', 'SECRET' or 'TOKEN' to be ignored by the unset function which is executed in the entrypoint. The function uses <code>^</code> regex. For example, if you set <code>ATL_ALLOWLIST_SENSITIVE_ENV_VARS="PATH_TO_SECRET_FILE"</code>, all variables starting with <code>PATH_TO_SECRET_FILE</code> will not be unset.</p> <details class=warning open=open> <summary>Value exposure on host OS</summary> <p>When using this property, the values to sensitive environment variables will be available in clear text on the host OS. As such, this data may be exposed to users or processes running on the host OS.</p> </details> <h3 id=advanced-configuration>Advanced Configuration<a class=headerlink href=#advanced-configuration title="Permanent link"> ¶</a></h3> <p>As mentioned at the top of this section, the settings from the environment are used to populate the application configuration on the container startup. However, in some cases you may wish to customise the settings in ways that are not supported by the environment variables above. In this case, it is possible to modify the base templates to add your own configuration. There are three main ways of doing this; modify our repository to your own image, build a new image from the existing one, or provide new templates at startup. We will briefly outline these methods here, but in practice how you do this will depend on your needs.</p> <h5 id=building-your-own-image>Building your own image<a class=headerlink href=#building-your-own-image title="Permanent link"> ¶</a></h5> <ul> <li>Clone the Atlassian repository at <a href=https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server/ >https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server/</a></li> <li>Modify or replace the <a href=https://jinja.palletsprojects.com/ >Jinja</a> templates under <code>config</code>; <em>NOTE</em>: The files must have the <code>.j2</code> extensions. However you don't have to use template variables if you don't wish.</li> <li>Build the new image with e.g: <code>docker build --tag my-confluence-image --build-arg CONFLUENCE_VERSION=6.x.x .</code></li> <li>Optionally push to a registry, and deploy.</li> </ul> <h5 id=build-a-new-image-from-the-existing-one>Build a new image from the existing one<a class=headerlink href=#build-a-new-image-from-the-existing-one title="Permanent link"> ¶</a></h5> <ul> <li>Create a new <code>Dockerfile</code>, which starts with the line e.g: <code>FROM atlassian/confluence:latest</code>.</li> <li>Use a <code>COPY</code> line to overwrite the provided templates.</li> <li>Build, push and deploy the new image as above.</li> </ul> <h5 id=overwrite-the-templates-at-runtime>Overwrite the templates at runtime<a class=headerlink href=#overwrite-the-templates-at-runtime title="Permanent link"> ¶</a></h5> <p>There are two main ways of doing this:</p> <ul> <li>If your container is going to be long-lived, you can create it, modify the installed templates under <code>/opt/atlassian/etc/</code>, and then run it.</li> <li>Alternatively, you can create a volume containing your alternative templates, and mount it over the provided templates at runtime with <code>--volume my-config:/opt/atlassian/etc/</code>.</li> </ul> <h2 id=shared-directory-and-user-ids>Shared directory and user IDs<a class=headerlink href=#shared-directory-and-user-ids title="Permanent link"> ¶</a></h2> <p>By default the Confuence application runs as the user <code>confluence</code>, with a UID and GID of 2002. Consequently this UID must have write access to the shared filesystem. If for some reason a different UID must be used, there are a number of options available:</p> <ul> <li>The Docker image can be rebuilt with a different UID.</li> <li>Under Linux, the UID can be remapped using <a href=https://docs.docker.com/engine/security/userns-remap/ >user namespace remapping</a>.</li> </ul> <p>To preserve strict permissions for certain configuration files, this container starts as <code>root</code> to perform bootstrapping before running Confluence under a non-privileged user account. If you wish to start the container as a non-root user, please note that Tomcat configuration, and the bootstrapping of seraph-config.xml (SSO) &amp; confluence-init.properties (overriding <code>$CONFLUENCE_HOME</code>) will be skipped and a warning will be logged. You may still apply custom configuration in this situation by mounting a custom file directly, e.g. by mounting your own server.xml file directly to <code>/opt/atlassian/confluence/conf/server.xml</code></p> <p>Database and Clustering bootstrapping will work as expected when starting this container as a non-root user.</p> <h2 id=upgrade>Upgrade<a class=headerlink href=#upgrade title="Permanent link"> ¶</a></h2> <p>To upgrade to a more recent version of Confluence Server you can simply stop the <code>Confluence</code> container and start a new one based on a more recent image: <div class=highlight><pre><span></span><code>docker<span class=w> </span>stop<span class=w> </span>confluence
docker<span class=w> </span>rm<span class=w> </span>confluence
docker<span class=w> </span>run<span class=w> </span>...<span class=w> </span><span class=o>(</span>see<span class=w> </span>above<span class=o>)</span>
</code></pre></div> As your data is stored in the data volume directory on the host, it will still be available after the upgrade.</p> <div class="admonition note"> <p class=admonition-title>Please make sure that you <strong>don't</strong> accidentally remove the <code>confluence</code> container and its volumes using the <code>-v</code> option.</p> </div> <h2 id=backup>Backup<a class=headerlink href=#backup title="Permanent link"> ¶</a></h2> <p>For evaluating Confluence you can use the built-in database that will store its files in the Confluence Server home directory. In that case it is sufficient to create a backup archive of the directory on the host that is used as a volume (<code>/data/your-confluence-home</code> in the example above).</p> <p>Confluence's <a href=https://confluence.atlassian.com/display/DOC/Configuring+Backups>automatic backup</a> is currently supported in the Docker setup. You can also use the <a href=https://confluence.atlassian.com/display/DOC/Production+Backup+Strategy>Production Backup Strategy</a> approach if you're using an external database.</p> <p>Read more about data recovery and backups: <a href=https://confluence.atlassian.com/display/DOC/Site+Backup+and+Restore>Site Backup and Restore</a></p> <h2 id=shutdown>Shutdown<a class=headerlink href=#shutdown title="Permanent link"> ¶</a></h2> <p>Confluence allows a grace period of 20s for active operations to finish before termination. If sending a <code>docker stop</code> this should be taken into account with the <code>--time</code> flag.</p> <p>Alternatively, the script <code>/shutdown-wait.sh</code> is provided, which will initiate a clean shutdown and wait for the process to complete. This is the recommended method for shutdown in environments which provide for orderly shutdown, e.g. Kubernetes via the <code>preStop</code> hook.</p> <h2 id=versioning>Versioning<a class=headerlink href=#versioning title="Permanent link"> ¶</a></h2> <p>The <code>latest</code> tag matches the most recent official release of Atlassian Confluence Server. So <code>atlassian/confluence:latest</code> will use the newest stable version of Confluence Server available.</p> <p>Alternatively, you can use a specific minor version of Confluence Server by using a version number tag: <code>atlassian/confluence:7.13</code>. This will install the latest <code>7.13.x</code> version that is available.</p> <p>We also publish docker images for our <a href=https://www.atlassian.com/software/confluence/download-eap>EAP releases</a> (not supported for use in production). The tag for EAP releases is the EAP version. For example to get the <code>7.8.0-beta1</code> EAP release, use <code>atlassian/confluence:7.8.0-beta1</code>.</p> <p>For example, <code>atlassian/confluence:7.13-ubuntu-jdk11</code> will install the latest 7.13.x version with Eclipse Temurin OpenJDK 11.</p> <h2 id=supported-jdk-versions-and-base-images>Supported JDK versions and base images<a class=headerlink href=#supported-jdk-versions-and-base-images title="Permanent link"> ¶</a></h2> <p>Atlassian Docker images are generated from the <a href=https://hub.docker.com/_/eclipse-temurin>official Eclipse Temurin OpenJDK Docker images</a>.</p> <p>Starting from 8.5.6 <a href="https://catalog.redhat.com/software/containers/ubi9/openjdk-17/61ee7c26ed74b2ffb22b07f6?architecture=amd64">UBI based</a> tags are published as well. Tags are available in 2 formats: <code>&lt;version&gt;-ubi9</code> and <code>&lt;version&gt;-ubi9-jdk17</code>.</p> <p>The build pipeline pushes both JDK11 and JDK17 tags for Confluence versions ranging from 7.19 to 8.9. Starting from 9.0 only JDK17 tags are published. UBI based tags are JDK17 only.</p> <p>The Docker images follow the <a href=https://confluence.atlassian.com/support/atlassian-support-end-of-life-policy-201851003.html>Atlassian Support end-of-life policy</a>; images for unsupported versions of the products remain available but will no longer receive updates or fixes.</p> <p>Historically, we have also generated other versions of the images, including JDK8, Alpine, and 'slim' versions of the JDK. These legacy images still exist in Docker Hub, however they should be considered deprecated, and do not receive updates or fixes.</p> <p>If for some reason you need a different version, see "Building your own image" above.</p> <h2 id=migration-to-ubi>Migration to UBI<a class=headerlink href=#migration-to-ubi title="Permanent link"> ¶</a></h2> <p>If you have been mounting any files to <code>${JAVA_HOME}</code> directory in <code>eclipse-temurin</code> based container, <code>JAVA_HOME</code> in UBI JDK17 container is set to <code>/usr/lib/jvm/java-17</code>.</p> <p>Also, if you have been mounting and running any custom scripts in the container, UBI-based images may lack some tools and utilities that are available out of the box in eclipse-temurin tags. If that's the case, see <a href=#building-your-own-image>Building your own image</a>.</p> <h2 id=supported-architectures>Supported architectures<a class=headerlink href=#supported-architectures title="Permanent link"> ¶</a></h2> <p>Currently, Confluence container images are built for the <code>linux/amd64</code> and <code>linux/arm64</code> target platforms. The Dockerfiles and support tooling have now had all architecture-specific components removed, so if necessary it is possible to build images for any platform supported by OCI-compliant container runtimes.</p> <h3 id=building-on-the-target-architecture>Building on the target architecture<a class=headerlink href=#building-on-the-target-architecture title="Permanent link"> ¶</a></h3> <p>Note: This method is known to work on Mac M1 and AWS ARM64 machines, but has not been extensively tested.</p> <p>The simplest method of getting a platform image is to build it on a target machine. The following assumes you have git and Docker installed. You will also need to know which version of Confluence you want to build; substitute <code>CONFLUENCE_VERSION=x.x.x</code> with your required version:</p> <p><div class=highlight><pre><span></span><code>git<span class=w> </span>clone<span class=w> </span>--recurse-submodule<span class=w> </span>https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server.git
<span class=nb>cd</span><span class=w> </span>docker-atlassian-confluence-server
docker<span class=w> </span>build<span class=w> </span>--tag<span class=w> </span>my-image<span class=w> </span>--build-arg<span class=w> </span><span class=nv>CONFLUENCE_VERSION</span><span class=o>=</span>x.x.x<span class=w> </span>.
</code></pre></div> This image can be pushed up to your own Docker Hub or private repository.</p> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link"> ¶</a></h2> <p>These images include built-in scripts to assist in performing common JVM diagnostic tasks.</p> <h3 id=thread-dumps>Thread dumps<a class=headerlink href=#thread-dumps title="Permanent link"> ¶</a></h3> <p><code>/opt/atlassian/support/thread-dumps.sh</code> can be run via <code>docker exec</code> to easily trigger the collection of thread dumps from the containerized application. For example:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>my_container<span class=w> </span>/opt/atlassian/support/thread-dumps.sh
</code></pre></div> <p>By default, this script will collect 10 thread dumps at 5 second intervals. This can be overridden by passing a custom value for the count and interval, by using <code>-c</code> / <code>--count</code> and <code>-i</code> / <code>--interval</code> respectively. For example, to collect 20 thread dumps at 3 second intervals:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>my_container<span class=w> </span>/opt/atlassian/support/thread-dumps.sh<span class=w> </span>--count<span class=w> </span><span class=m>20</span><span class=w> </span>--interval<span class=w> </span><span class=m>3</span>
</code></pre></div> <p>Thread dumps will be written to <code>$APP_HOME/thread_dumps/&lt;date&gt;</code>.</p> <details class=note open=open> <summary>Disable capturing output from top run</summary> <p>By default this script will also capture output from top run in 'Thread-mode'. This can be disabled by passing <code>-n</code> / <code>--no-top</code></p> </details> <h3 id=heap-dump>Heap dump<a class=headerlink href=#heap-dump title="Permanent link"> ¶</a></h3> <p><code>/opt/atlassian/support/heap-dump.sh</code> can be run via <code>docker exec</code> to easily trigger the collection of a heap dump from the containerized application. For example:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>my_container<span class=w> </span>/opt/atlassian/support/heap-dump.sh
</code></pre></div> <p>A heap dump will be written to <code>$APP_HOME/heap.bin</code>. If a file already exists at this location, use <code>-f</code> / <code>--force</code> to overwrite the existing heap dump file.</p> <h3 id=manual-diagnostics>Manual diagnostics<a class=headerlink href=#manual-diagnostics title="Permanent link"> ¶</a></h3> <p>The <code>jcmd</code> utility is also included in these images and can be used by starting a <code>bash</code> shell in the running container:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>my_container<span class=w> </span>/bin/bash
</code></pre></div> <h2 id=support>Support<a class=headerlink href=#support title="Permanent link"> ¶</a></h2> <p>For product support, go to <a href=https://support.atlassian.com/confluence-server/ >support.atlassian.com</a>.</p> <p>You can also visit the <a href=https://community.atlassian.com/t5/Atlassian-Data-Center-on/gh-p/DC_Kubernetes>Atlassian Data Center</a> forum for discussion on running Atlassian Data Center products in containers.</p> <h2 id=contribution>Contribution<a class=headerlink href=#contribution title="Permanent link"> ¶</a></h2> <p>See the <a href=https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server/src/master/CONTRIBUTING.md>contributing guideline</a> if you are contributing from outside Atlassian.</p> <h2 id=changelog>Changelog<a class=headerlink href=#changelog title="Permanent link"> ¶</a></h2> <p>For a detailed list of changes to the Docker image configuration see <a href=https://bitbucket.org/atlassian-docker/docker-atlassian-confluence-server/commits/ >the Git commit history</a>.</p> <h2 id=license>License<a class=headerlink href=#license title="Permanent link"> ¶</a></h2> <p>Copyright © 2020 Atlassian Corporation Pty Ltd. Licensed under the Apache License, Version 2.0.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; [2024] Atlassian and others. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://community.atlassian.com/t5/Atlassian-Data-Center-on/gh-p/DC_Kubernetes target=_blank rel=noopener title=community.atlassian.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M152.2 236.4c-7.7-8.2-19.7-7.7-24.8 2.8L1.6 490.2c-5 10 2.4 21.7 13.4 21.7h175c5.8.1 11-3.2 13.4-8.4 37.9-77.8 15.1-196.3-51.2-267.1M244.4 8.1c-122.3 193.4-8.5 348.6 65 495.5 2.5 5.1 7.7 8.4 13.4 8.4H497c11.2 0 18.4-11.8 13.4-21.7 0 0-234.5-470.6-240.4-482.3-5.3-10.6-18.8-10.8-25.6.1"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["search.suggest", "search.highlight", "navigation.instant", "navigation.tabs", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>